{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/ua-parser-js/src/ua-parser.js","node_modules/@parcel/runtime-js/lib/runtime-93e75a856f12287d.js","node_modules/comlink/src/comlink.ts","node_modules/@bjorn3/browser_wasi_shim/dist/wasi_defs.js","node_modules/@bjorn3/browser_wasi_shim/dist/debug.js","node_modules/@bjorn3/browser_wasi_shim/dist/fd.js","node_modules/@bjorn3/browser_wasi_shim/dist/fs_fd.js","node_modules/@bjorn3/browser_wasi_shim/dist/fs_core.js","node_modules/@ruby/wasm-wasi/dist/index.esm.js","src/key-event-bus.ts","src/optcarrot.worker.ts","node_modules/@bjorn3/browser_wasi_shim/dist/wasi.js","src/index.ts","node_modules/@parcel/runtime-js/lib/helpers/get-worker-url.js","node_modules/@parcel/runtime-js/lib/runtime-4b53507beb4d3823.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.2\n   Copyright © 2012-2021 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.2',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 255;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK   = 'Facebook';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY).replace(/\\s\\s*$/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,      // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n            // Trident based\n            /(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,               // Avant/IEMobile/SlimBrowser\n            /(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,                                  // Baidu Browser\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /\\bqbcore\\/([\\w\\.]+)/i                                              // WeChat Desktop for Windows Built-in Browser\n            ], [VERSION, [NAME, 'WeChat(Win) Desktop']], [\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /yabrowser\\/([\\w\\.]+)/i                                             // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI '+BROWSER]], [\n            /fxios\\/([-\\w\\.]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihu|(qi?ho?o?|360)browser/i                                     // 360\n            ], [[NAME, '360 '+BROWSER]], [\n            /(oculus|samsung|sailfish)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1 '+BROWSER], VERSION], [                      // Oculus/Samsung/Sailfish Browser\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i            // QQBrowser/Baidu App/2345 Browser\n            ], [NAME, VERSION], [\n            /(metasr)[\\/ ]?([\\w\\.]+)/i,                                         // SouGouBrowser\n            /(lbbrowser)/i                                                      // LieBao Browser\n            ], [NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(chromium|instagram)[\\/ ]([-\\w\\.]+)/i                              // Chromium/Instagram\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.]+) .*mobile\\/\\w+ (safari)/i                        // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w\\.]+) .*(mobile ?safari|safari)/i                     // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror/Klar\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i                                              // Links\n            ], [NAME, VERSION]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            // Ordered by popularity\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[pt]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-\\w+|galaxy nexus)/i,\n            /samsung[- ]([-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /\\((ip(?:hone|od)[\\w ]*);/i                                         // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei|honor)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}-[atu]?[ln][01259x][012359][an]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+)(?: bui|\\))/i,                                       // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[12]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+ ([c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi)( bui|\\))/i,                                         // Kindle Fire without Silk\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w)( bui|\\))/i                                          // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w ]*; *(\\w[^;]*);([^;]*)/i               // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n            /(quest( 2)?)/i                                                     // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i           // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| safari)|pda(?=.+windows ce))/i              // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i                                       // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows) nt 6\\.2; (arm)/i,                                        // Windows RT\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,            // Windows Phone\n            /(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, strMapper, windowsVersionMap]], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86)/i                              // Android-x86\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+ ([\\w\\.]+\\w)/i                                         // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,            // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _ua = ua || ((typeof window !== UNDEF_TYPE && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser.major = majorize(_browser.version);\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1LzKV\\\":\\\"index.b971d4f8.js\\\",\\\"3YKzz\\\":\\\"optcarrot.worker.3977d21b.js\\\"}\"));","/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Endpoint,\n  EventSource,\n  Message,\n  MessageType,\n  PostMessageWithOrigin,\n  WireValue,\n  WireValueType,\n} from \"./protocol\";\nexport { Endpoint };\n\nexport const proxyMarker = Symbol(\"Comlink.proxy\");\nexport const createEndpoint = Symbol(\"Comlink.endpoint\");\nexport const releaseProxy = Symbol(\"Comlink.releaseProxy\");\n\nconst throwMarker = Symbol(\"Comlink.thrown\");\n\n/**\n * Interface of values that were marked to be proxied with `comlink.proxy()`.\n * Can also be implemented by classes.\n */\nexport interface ProxyMarked {\n  [proxyMarker]: true;\n}\n\n/**\n * Takes a type and wraps it in a Promise, if it not already is one.\n * This is to avoid `Promise<Promise<T>>`.\n *\n * This is the inverse of `Unpromisify<T>`.\n */\ntype Promisify<T> = T extends Promise<unknown> ? T : Promise<T>;\n/**\n * Takes a type that may be Promise and unwraps the Promise type.\n * If `P` is not a Promise, it returns `P`.\n *\n * This is the inverse of `Promisify<T>`.\n */\ntype Unpromisify<P> = P extends Promise<infer T> ? T : P;\n\n/**\n * Takes the raw type of a remote property and returns the type that is visible to the local thread on the proxy.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions.\n * See https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype RemoteProperty<T> =\n  // If the value is a method, comlink will proxy it automatically.\n  // Objects are only proxied if they are marked to be proxied.\n  // Otherwise, the property is converted to a Promise that resolves the cloned value.\n  T extends Function | ProxyMarked ? Remote<T> : Promisify<T>;\n\n/**\n * Takes the raw type of a property as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This is the inverse of `RemoteProperty<T>`.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions. See\n * https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype LocalProperty<T> = T extends Function | ProxyMarked\n  ? Local<T>\n  : Unpromisify<T>;\n\n/**\n * Proxies `T` if it is a `ProxyMarked`, clones it otherwise (as handled by structured cloning and transfer handlers).\n */\nexport type ProxyOrClone<T> = T extends ProxyMarked ? Remote<T> : T;\n/**\n * Inverse of `ProxyOrClone<T>`.\n */\nexport type UnproxyOrClone<T> = T extends RemoteObject<ProxyMarked>\n  ? Local<T>\n  : T;\n\n/**\n * Takes the raw type of a remote object in the other thread and returns the type as it is visible to the local thread\n * when proxied with `Comlink.proxy()`.\n *\n * This does not handle call signatures, which is handled by the more general `Remote<T>` type.\n *\n * @template T The raw type of a remote object as seen in the other thread.\n */\nexport type RemoteObject<T> = { [P in keyof T]: RemoteProperty<T[P]> };\n/**\n * Takes the type of an object as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This does not handle call signatures, which is handled by the more general `Local<T>` type.\n *\n * This is the inverse of `RemoteObject<T>`.\n *\n * @template T The type of a proxied object.\n */\nexport type LocalObject<T> = { [P in keyof T]: LocalProperty<T[P]> };\n\n/**\n * Additional special comlink methods available on each proxy returned by `Comlink.wrap()`.\n */\nexport interface ProxyMethods {\n  [createEndpoint]: () => Promise<MessagePort>;\n  [releaseProxy]: () => void;\n}\n\n/**\n * Takes the raw type of a remote object, function or class in the other thread and returns the type as it is visible to\n * the local thread from the proxy return value of `Comlink.wrap()` or `Comlink.proxy()`.\n */\nexport type Remote<T> =\n  // Handle properties\n  RemoteObject<T> &\n    // Handle call signature (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: UnproxyOrClone<TArguments[I]> }\n        ) => Promisify<ProxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: UnproxyOrClone<TArguments[I]>;\n            }\n          ): Promisify<Remote<TInstance>>;\n        }\n      : unknown) &\n    // Include additional special comlink methods available on the proxy.\n    ProxyMethods;\n\n/**\n * Expresses that a type can be either a sync or async.\n */\ntype MaybePromise<T> = Promise<T> | T;\n\n/**\n * Takes the raw type of a remote object, function or class as a remote thread would see it through a proxy (e.g. when\n * passed in as a function argument) and returns the type the local thread has to supply.\n *\n * This is the inverse of `Remote<T>`. It takes a `Remote<T>` and returns its original input `T`.\n */\nexport type Local<T> =\n  // Omit the special proxy methods (they don't need to be supplied, comlink adds them)\n  Omit<LocalObject<T>, keyof ProxyMethods> &\n    // Handle call signatures (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: ProxyOrClone<TArguments[I]> }\n        ) => // The raw function could either be sync or async, but is always proxied automatically\n        MaybePromise<UnproxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: ProxyOrClone<TArguments[I]>;\n            }\n          ): // The raw constructor could either be sync or async, but is always proxied automatically\n          MaybePromise<Local<Unpromisify<TInstance>>>;\n        }\n      : unknown);\n\nconst isObject = (val: unknown): val is object =>\n  (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n\n/**\n * Customizes the serialization of certain values as determined by `canHandle()`.\n *\n * @template T The input type being handled by this transfer handler.\n * @template S The serialized type sent over the wire.\n */\nexport interface TransferHandler<T, S> {\n  /**\n   * Gets called for every value to determine whether this transfer handler\n   * should serialize the value, which includes checking that it is of the right\n   * type (but can perform checks beyond that as well).\n   */\n  canHandle(value: unknown): value is T;\n\n  /**\n   * Gets called with the value if `canHandle()` returned `true` to produce a\n   * value that can be sent in a message, consisting of structured-cloneable\n   * values and/or transferrable objects.\n   */\n  serialize(value: T): [S, Transferable[]];\n\n  /**\n   * Gets called to deserialize an incoming value that was serialized in the\n   * other thread with this transfer handler (known through the name it was\n   * registered under).\n   */\n  deserialize(value: S): T;\n}\n\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler: TransferHandler<object, MessagePort> = {\n  canHandle: (val): val is ProxyMarked =>\n    isObject(val) && (val as ProxyMarked)[proxyMarker],\n  serialize(obj) {\n    const { port1, port2 } = new MessageChannel();\n    expose(obj, port1);\n    return [port2, [port2]];\n  },\n  deserialize(port) {\n    port.start();\n    return wrap(port);\n  },\n};\n\ninterface ThrownValue {\n  [throwMarker]: unknown; // just needs to be present\n  value: unknown;\n}\ntype SerializedThrownValue =\n  | { isError: true; value: Error }\n  | { isError: false; value: unknown };\n\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler: TransferHandler<\n  ThrownValue,\n  SerializedThrownValue\n> = {\n  canHandle: (value): value is ThrownValue =>\n    isObject(value) && throwMarker in value,\n  serialize({ value }) {\n    let serialized: SerializedThrownValue;\n    if (value instanceof Error) {\n      serialized = {\n        isError: true,\n        value: {\n          message: value.message,\n          name: value.name,\n          stack: value.stack,\n        },\n      };\n    } else {\n      serialized = { isError: false, value };\n    }\n    return [serialized, []];\n  },\n  deserialize(serialized) {\n    if (serialized.isError) {\n      throw Object.assign(\n        new Error(serialized.value.message),\n        serialized.value\n      );\n    }\n    throw serialized.value;\n  },\n};\n\n/**\n * Allows customizing the serialization of certain values.\n */\nexport const transferHandlers = new Map<\n  string,\n  TransferHandler<unknown, unknown>\n>([\n  [\"proxy\", proxyTransferHandler],\n  [\"throw\", throwTransferHandler],\n]);\n\nexport function expose(obj: any, ep: Endpoint = self as any) {\n  ep.addEventListener(\"message\", function callback(ev: MessageEvent) {\n    if (!ev || !ev.data) {\n      return;\n    }\n    const { id, type, path } = {\n      path: [] as string[],\n      ...(ev.data as Message),\n    };\n    const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n    let returnValue;\n    try {\n      const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n      const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n      switch (type) {\n        case MessageType.GET:\n          {\n            returnValue = rawValue;\n          }\n          break;\n        case MessageType.SET:\n          {\n            parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n            returnValue = true;\n          }\n          break;\n        case MessageType.APPLY:\n          {\n            returnValue = rawValue.apply(parent, argumentList);\n          }\n          break;\n        case MessageType.CONSTRUCT:\n          {\n            const value = new rawValue(...argumentList);\n            returnValue = proxy(value);\n          }\n          break;\n        case MessageType.ENDPOINT:\n          {\n            const { port1, port2 } = new MessageChannel();\n            expose(obj, port2);\n            returnValue = transfer(port1, [port1]);\n          }\n          break;\n        case MessageType.RELEASE:\n          {\n            returnValue = undefined;\n          }\n          break;\n        default:\n          return;\n      }\n    } catch (value) {\n      returnValue = { value, [throwMarker]: 0 };\n    }\n    Promise.resolve(returnValue)\n      .catch((value) => {\n        return { value, [throwMarker]: 0 };\n      })\n      .then((returnValue) => {\n        const [wireValue, transferables] = toWireValue(returnValue);\n        ep.postMessage({ ...wireValue, id }, transferables);\n        if (type === MessageType.RELEASE) {\n          // detach and deactive after sending release response above.\n          ep.removeEventListener(\"message\", callback as any);\n          closeEndPoint(ep);\n        }\n      });\n  } as any);\n  if (ep.start) {\n    ep.start();\n  }\n}\n\nfunction isMessagePort(endpoint: Endpoint): endpoint is MessagePort {\n  return endpoint.constructor.name === \"MessagePort\";\n}\n\nfunction closeEndPoint(endpoint: Endpoint) {\n  if (isMessagePort(endpoint)) endpoint.close();\n}\n\nexport function wrap<T>(ep: Endpoint, target?: any): Remote<T> {\n  return createProxy<T>(ep, [], target) as any;\n}\n\nfunction throwIfProxyReleased(isReleased: boolean) {\n  if (isReleased) {\n    throw new Error(\"Proxy has been released and is not useable\");\n  }\n}\n\nfunction createProxy<T>(\n  ep: Endpoint,\n  path: (string | number | symbol)[] = [],\n  target: object = function () {}\n): Remote<T> {\n  let isProxyReleased = false;\n  const proxy = new Proxy(target, {\n    get(_target, prop) {\n      throwIfProxyReleased(isProxyReleased);\n      if (prop === releaseProxy) {\n        return () => {\n          return requestResponseMessage(ep, {\n            type: MessageType.RELEASE,\n            path: path.map((p) => p.toString()),\n          }).then(() => {\n            closeEndPoint(ep);\n            isProxyReleased = true;\n          });\n        };\n      }\n      if (prop === \"then\") {\n        if (path.length === 0) {\n          return { then: () => proxy };\n        }\n        const r = requestResponseMessage(ep, {\n          type: MessageType.GET,\n          path: path.map((p) => p.toString()),\n        }).then(fromWireValue);\n        return r.then.bind(r);\n      }\n      return createProxy(ep, [...path, prop]);\n    },\n    set(_target, prop, rawValue) {\n      throwIfProxyReleased(isProxyReleased);\n      // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n      // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\n      const [value, transferables] = toWireValue(rawValue);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.SET,\n          path: [...path, prop].map((p) => p.toString()),\n          value,\n        },\n        transferables\n      ).then(fromWireValue) as any;\n    },\n    apply(_target, _thisArg, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const last = path[path.length - 1];\n      if ((last as any) === createEndpoint) {\n        return requestResponseMessage(ep, {\n          type: MessageType.ENDPOINT,\n        }).then(fromWireValue);\n      }\n      // We just pretend that `bind()` didn’t happen.\n      if (last === \"bind\") {\n        return createProxy(ep, path.slice(0, -1));\n      }\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.APPLY,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n    construct(_target, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.CONSTRUCT,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n  });\n  return proxy as any;\n}\n\nfunction myFlat<T>(arr: (T | T[])[]): T[] {\n  return Array.prototype.concat.apply([], arr);\n}\n\nfunction processArguments(argumentList: any[]): [WireValue[], Transferable[]] {\n  const processed = argumentList.map(toWireValue);\n  return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\n\nconst transferCache = new WeakMap<any, Transferable[]>();\nexport function transfer<T>(obj: T, transfers: Transferable[]): T {\n  transferCache.set(obj, transfers);\n  return obj;\n}\n\nexport function proxy<T>(obj: T): T & ProxyMarked {\n  return Object.assign(obj, { [proxyMarker]: true }) as any;\n}\n\nexport function windowEndpoint(\n  w: PostMessageWithOrigin,\n  context: EventSource = self,\n  targetOrigin = \"*\"\n): Endpoint {\n  return {\n    postMessage: (msg: any, transferables: Transferable[]) =>\n      w.postMessage(msg, targetOrigin, transferables),\n    addEventListener: context.addEventListener.bind(context),\n    removeEventListener: context.removeEventListener.bind(context),\n  };\n}\n\nfunction toWireValue(value: any): [WireValue, Transferable[]] {\n  for (const [name, handler] of transferHandlers) {\n    if (handler.canHandle(value)) {\n      const [serializedValue, transferables] = handler.serialize(value);\n      return [\n        {\n          type: WireValueType.HANDLER,\n          name,\n          value: serializedValue,\n        },\n        transferables,\n      ];\n    }\n  }\n  return [\n    {\n      type: WireValueType.RAW,\n      value,\n    },\n    transferCache.get(value) || [],\n  ];\n}\n\nfunction fromWireValue(value: WireValue): any {\n  switch (value.type) {\n    case WireValueType.HANDLER:\n      return transferHandlers.get(value.name)!.deserialize(value.value);\n    case WireValueType.RAW:\n      return value.value;\n  }\n}\n\nfunction requestResponseMessage(\n  ep: Endpoint,\n  msg: Message,\n  transfers?: Transferable[]\n): Promise<WireValue> {\n  return new Promise((resolve) => {\n    const id = generateUUID();\n    ep.addEventListener(\"message\", function l(ev: MessageEvent) {\n      if (!ev.data || !ev.data.id || ev.data.id !== id) {\n        return;\n      }\n      ep.removeEventListener(\"message\", l as any);\n      resolve(ev.data);\n    } as any);\n    if (ep.start) {\n      ep.start();\n    }\n    ep.postMessage({ id, ...msg }, transfers);\n  });\n}\n\nfunction generateUUID(): string {\n  return new Array(4)\n    .fill(0)\n    .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n    .join(\"-\");\n}\n","export const FD_STDIN=0;export const FD_STDOUT=1;export const FD_STDERR=2;export const CLOCKID_REALTIME=0;export const CLOCKID_MONOTONIC=1;export const CLOCKID_PROCESS_CPUTIME_ID=2;export const CLOCKID_THREAD_CPUTIME_ID=3;export const ERRNO_SUCCESS=0;export const ERRNO_2BIG=1;export const ERRNO_ACCES=2;export const ERRNO_ADDRINUSE=3;export const ERRNO_ADDRNOTAVAIL=4;export const ERRNO_AFNOSUPPORT=5;export const ERRNO_AGAIN=6;export const ERRNO_ALREADY=7;export const ERRNO_BADF=8;export const ERRNO_BADMSG=9;export const ERRNO_BUSY=10;export const ERRNO_CANCELED=11;export const ERRNO_CHILD=12;export const ERRNO_CONNABORTED=13;export const ERRNO_CONNREFUSED=14;export const ERRNO_CONNRESET=15;export const ERRNO_DEADLK=16;export const ERRNO_DESTADDRREQ=17;export const ERRNO_DOM=18;export const ERRNO_DQUOT=19;export const ERRNO_EXIST=20;export const ERRNO_FAULT=21;export const ERRNO_FBIG=22;export const ERRNO_HOSTUNREACH=23;export const ERRNO_IDRM=24;export const ERRNO_ILSEQ=25;export const ERRNO_INPROGRESS=26;export const ERRNO_INTR=27;export const ERRNO_INVAL=28;export const ERRNO_IO=29;export const ERRNO_ISCONN=30;export const ERRNO_ISDIR=31;export const ERRNO_LOOP=32;export const ERRNO_MFILE=33;export const ERRNO_MLINK=34;export const ERRNO_MSGSIZE=35;export const ERRNO_MULTIHOP=36;export const ERRNO_NAMETOOLONG=37;export const ERRNO_NETDOWN=38;export const ERRNO_NETRESET=39;export const ERRNO_NETUNREACH=40;export const ERRNO_NFILE=41;export const ERRNO_NOBUFS=42;export const ERRNO_NODEV=43;export const ERRNO_NOENT=44;export const ERRNO_NOEXEC=45;export const ERRNO_NOLCK=46;export const ERRNO_NOLINK=47;export const ERRNO_NOMEM=48;export const ERRNO_NOMSG=49;export const ERRNO_NOPROTOOPT=50;export const ERRNO_NOSPC=51;export const ERRNO_NOSYS=52;export const ERRNO_NOTCONN=53;export const ERRNO_NOTDIR=54;export const ERRNO_NOTEMPTY=55;export const ERRNO_NOTRECOVERABLE=56;export const ERRNO_NOTSOCK=57;export const ERRNO_NOTSUP=58;export const ERRNO_NOTTY=59;export const ERRNO_NXIO=60;export const ERRNO_OVERFLOW=61;export const ERRNO_OWNERDEAD=62;export const ERRNO_PERM=63;export const ERRNO_PIPE=64;export const ERRNO_PROTO=65;export const ERRNO_PROTONOSUPPORT=66;export const ERRNO_PROTOTYPE=67;export const ERRNO_RANGE=68;export const ERRNO_ROFS=69;export const ERRNO_SPIPE=70;export const ERRNO_SRCH=71;export const ERRNO_STALE=72;export const ERRNO_TIMEDOUT=73;export const ERRNO_TXTBSY=74;export const ERRNO_XDEV=75;export const ERRNO_NOTCAPABLE=76;export const RIGHTS_FD_DATASYNC=1<<0;export const RIGHTS_FD_READ=1<<1;export const RIGHTS_FD_SEEK=1<<2;export const RIGHTS_FD_FDSTAT_SET_FLAGS=1<<3;export const RIGHTS_FD_SYNC=1<<4;export const RIGHTS_FD_TELL=1<<5;export const RIGHTS_FD_WRITE=1<<6;export const RIGHTS_FD_ADVISE=1<<7;export const RIGHTS_FD_ALLOCATE=1<<8;export const RIGHTS_PATH_CREATE_DIRECTORY=1<<9;export const RIGHTS_PATH_CREATE_FILE=1<<10;export const RIGHTS_PATH_LINK_SOURCE=1<<11;export const RIGHTS_PATH_LINK_TARGET=1<<12;export const RIGHTS_PATH_OPEN=1<<13;export const RIGHTS_FD_READDIR=1<<14;export const RIGHTS_PATH_READLINK=1<<15;export const RIGHTS_PATH_RENAME_SOURCE=1<<16;export const RIGHTS_PATH_RENAME_TARGET=1<<17;export const RIGHTS_PATH_FILESTAT_GET=1<<18;export const RIGHTS_PATH_FILESTAT_SET_SIZE=1<<19;export const RIGHTS_PATH_FILESTAT_SET_TIMES=1<<20;export const RIGHTS_FD_FILESTAT_GET=1<<21;export const RIGHTS_FD_FILESTAT_SET_SIZE=1<<22;export const RIGHTS_FD_FILESTAT_SET_TIMES=1<<23;export const RIGHTS_PATH_SYMLINK=1<<24;export const RIGHTS_PATH_REMOVE_DIRECTORY=1<<25;export const RIGHTS_PATH_UNLINK_FILE=1<<26;export const RIGHTS_POLL_FD_READWRITE=1<<27;export const RIGHTS_SOCK_SHUTDOWN=1<<28;export class Iovec{static read_bytes(view,ptr){const iovec=new Iovec;iovec.buf=view.getUint32(ptr,true);iovec.buf_len=view.getUint32(ptr+4,true);return iovec}static read_bytes_array(view,ptr,len){const iovecs=[];for(let i=0;i<len;i++){iovecs.push(Iovec.read_bytes(view,ptr+8*i))}return iovecs}}export class Ciovec{static read_bytes(view,ptr){const iovec=new Ciovec;iovec.buf=view.getUint32(ptr,true);iovec.buf_len=view.getUint32(ptr+4,true);return iovec}static read_bytes_array(view,ptr,len){const iovecs=[];for(let i=0;i<len;i++){iovecs.push(Ciovec.read_bytes(view,ptr+8*i))}return iovecs}}export const WHENCE_SET=0;export const WHENCE_CUR=1;export const WHENCE_END=2;export const FILETYPE_UNKNOWN=0;export const FILETYPE_BLOCK_DEVICE=1;export const FILETYPE_CHARACTER_DEVICE=2;export const FILETYPE_DIRECTORY=3;export const FILETYPE_REGULAR_FILE=4;export const FILETYPE_SOCKET_DGRAM=5;export const FILETYPE_SOCKET_STREAM=6;export const FILETYPE_SYMBOLIC_LINK=7;export class Dirent{head_length(){return 24}name_length(){return this.dir_name.byteLength}write_head_bytes(view,ptr){view.setBigUint64(ptr,this.d_next,true);view.setBigUint64(ptr+8,this.d_ino,true);view.setUint32(ptr+16,this.dir_name.length,true);view.setUint8(ptr+20,this.d_type)}write_name_bytes(view8,ptr,buf_len){view8.set(this.dir_name.slice(0,Math.min(this.dir_name.byteLength,buf_len)),ptr)}constructor(next_cookie,name,type){this.d_ino=1n;const encoded_name=new TextEncoder().encode(name);this.d_next=next_cookie;this.d_namlen=encoded_name.byteLength;this.d_type=type;this.dir_name=encoded_name}}export const ADVICE_NORMAL=0;export const ADVICE_SEQUENTIAL=1;export const ADVICE_RANDOM=2;export const ADVICE_WILLNEED=3;export const ADVICE_DONTNEED=4;export const ADVICE_NOREUSE=5;export const FDFLAGS_APPEND=1<<0;export const FDFLAGS_DSYNC=1<<1;export const FDFLAGS_NONBLOCK=1<<2;export const FDFLAGS_RSYNC=1<<3;export const FDFLAGS_SYNC=1<<4;export class Fdstat{write_bytes(view,ptr){view.setUint8(ptr,this.fs_filetype);view.setUint16(ptr+2,this.fs_flags,true);view.setBigUint64(ptr+8,this.fs_rights_base,true);view.setBigUint64(ptr+16,this.fs_rights_inherited,true)}constructor(filetype,flags){this.fs_rights_base=0n;this.fs_rights_inherited=0n;this.fs_filetype=filetype;this.fs_flags=flags}}export const FSTFLAGS_ATIM=1<<0;export const FSTFLAGS_ATIM_NOW=1<<1;export const FSTFLAGS_MTIM=1<<2;export const FSTFLAGS_MTIM_NOW=1<<3;export const OFLAGS_CREAT=1<<0;export const OFLAGS_DIRECTORY=1<<1;export const OFLAGS_EXCL=1<<2;export const OFLAGS_TRUNC=1<<3;export class Filestat{write_bytes(view,ptr){view.setBigUint64(ptr,this.dev,true);view.setBigUint64(ptr+8,this.ino,true);view.setUint8(ptr+16,this.filetype);view.setBigUint64(ptr+24,this.nlink,true);view.setBigUint64(ptr+32,this.size,true);view.setBigUint64(ptr+38,this.atim,true);view.setBigUint64(ptr+46,this.mtim,true);view.setBigUint64(ptr+52,this.ctim,true)}constructor(filetype,size){this.dev=0n;this.ino=0n;this.nlink=0n;this.atim=0n;this.mtim=0n;this.ctim=0n;this.filetype=filetype;this.size=size}}export const EVENTTYPE_CLOCK=0;export const EVENTTYPE_FD_READ=1;export const EVENTTYPE_FD_WRITE=2;export const EVENTRWFLAGS_FD_READWRITE_HANGUP=1<<0;export const SUBCLOCKFLAGS_SUBSCRIPTION_CLOCK_ABSTIME=1<<0;export const SIGNAL_NONE=0;export const SIGNAL_HUP=1;export const SIGNAL_INT=2;export const SIGNAL_QUIT=3;export const SIGNAL_ILL=4;export const SIGNAL_TRAP=5;export const SIGNAL_ABRT=6;export const SIGNAL_BUS=7;export const SIGNAL_FPE=8;export const SIGNAL_KILL=9;export const SIGNAL_USR1=10;export const SIGNAL_SEGV=11;export const SIGNAL_USR2=12;export const SIGNAL_PIPE=13;export const SIGNAL_ALRM=14;export const SIGNAL_TERM=15;export const SIGNAL_CHLD=16;export const SIGNAL_CONT=17;export const SIGNAL_STOP=18;export const SIGNAL_TSTP=19;export const SIGNAL_TTIN=20;export const SIGNAL_TTOU=21;export const SIGNAL_URG=22;export const SIGNAL_XCPU=23;export const SIGNAL_XFSZ=24;export const SIGNAL_VTALRM=25;export const SIGNAL_PROF=26;export const SIGNAL_WINCH=27;export const SIGNAL_POLL=28;export const SIGNAL_PWR=29;export const SIGNAL_SYS=30;export const RIFLAGS_RECV_PEEK=1<<0;export const RIFLAGS_RECV_WAITALL=1<<1;export const ROFLAGS_RECV_DATA_TRUNCATED=1<<0;export const SDFLAGS_RD=1<<0;export const SDFLAGS_WR=1<<1;export const PREOPENTYPE_DIR=0;export class PrestatDir{write_bytes(view,ptr){view.setUint32(ptr,this.pr_name_len,true)}constructor(name_len){this.pr_name_len=name_len}}export class Prestat{static dir(name_len){const prestat=new Prestat;prestat.tag=PREOPENTYPE_DIR;prestat.inner=new PrestatDir(name_len);return prestat}write_bytes(view,ptr){view.setUint32(ptr,this.tag,true);this.inner.write_bytes(view,ptr+4)}}","let Debug=class Debug{enable(enabled){this.log=createLogger(enabled===undefined?true:enabled,this.prefix)}get enabled(){return this.isEnabled}constructor(isEnabled){this.isEnabled=isEnabled;this.prefix=\"wasi:\";this.enable(isEnabled)}};function createLogger(enabled,prefix){if(enabled){const a=console.log.bind(console,\"%c%s\",\"color: #265BA0\",prefix);return a}else{return()=>{}}}export const debug=new Debug(false);","export class Fd{fd_advise(offset,len,advice){return-1}fd_allocate(offset,len){return-1}fd_close(){return 0}fd_datasync(){return-1}fd_fdstat_get(){return{ret:-1,fdstat:null}}fd_fdstat_set_flags(flags){return-1}fd_fdstat_set_rights(fs_rights_base,fs_rights_inheriting){return-1}fd_filestat_get(){return{ret:-1,filestat:null}}fd_filestat_set_size(size){return-1}fd_filestat_set_times(atim,mtim,fst_flags){return-1}fd_pread(view8,iovs,offset){return{ret:-1,nread:0}}fd_prestat_get(){return{ret:-1,prestat:null}}fd_prestat_dir_name(){return{ret:-1,prestat_dir_name:null}}fd_pwrite(view8,iovs,offset){return{ret:-1,nwritten:0}}fd_read(view8,iovs){return{ret:-1,nread:0}}fd_readdir_single(cookie){return{ret:-1,dirent:null}}fd_seek(offset,whence){return{ret:-1,offset:0n}}fd_sync(){return 0}fd_tell(){return{ret:-1,offset:0n}}fd_write(view8,iovs){return{ret:-1,nwritten:0}}path_create_directory(path){return-1}path_filestat_get(flags,path){return{ret:-1,filestat:null}}path_filestat_set_times(flags,path,atim,mtim,fst_flags){return-1}path_link(old_fd,old_flags,old_path,new_path){return-1}path_open(dirflags,path,oflags,fs_rights_base,fs_rights_inheriting,fdflags){return{ret:-1,fd_obj:null}}path_readlink(path){return{ret:-1,data:null}}path_remove_directory(path){return-1}path_rename(old_path,new_fd,new_path){return-1}path_symlink(old_path,new_path){return-1}path_unlink_file(path){return-1}}","import*as wasi from\"./wasi_defs.js\";import{Directory}from\"./fs_core.js\";import{Fd}from\"./fd.js\";import{debug}from\"./debug.js\";export class OpenFile extends Fd{fd_fdstat_get(){return{ret:0,fdstat:new wasi.Fdstat(wasi.FILETYPE_REGULAR_FILE,0)}}fd_read(view8,iovs){let nread=0;for(const iovec of iovs){if(this.file_pos<this.file.data.byteLength){const slice=this.file.data.slice(Number(this.file_pos),Number(this.file_pos+BigInt(iovec.buf_len)));view8.set(slice,iovec.buf);this.file_pos+=BigInt(slice.length);nread+=slice.length}else{break}}return{ret:0,nread}}fd_pread(view8,iovs,offset){let nread=0;for(const iovec of iovs){if(offset<this.file.data.byteLength){const slice=this.file.data.slice(Number(offset),Number(offset+BigInt(iovec.buf_len)));view8.set(slice,iovec.buf);offset+=BigInt(slice.length);nread+=slice.length}else{break}}return{ret:0,nread}}fd_seek(offset,whence){let calculated_offset;switch(whence){case wasi.WHENCE_SET:calculated_offset=offset;break;case wasi.WHENCE_CUR:calculated_offset=this.file_pos+offset;break;case wasi.WHENCE_END:calculated_offset=BigInt(this.file.data.byteLength)+offset;break;default:return{ret:wasi.ERRNO_INVAL,offset:0n}}if(calculated_offset<0){return{ret:wasi.ERRNO_INVAL,offset:0n}}this.file_pos=calculated_offset;return{ret:0,offset:this.file_pos}}fd_write(view8,iovs){let nwritten=0;if(this.file.readonly)return{ret:wasi.ERRNO_BADF,nwritten};for(const iovec of iovs){const buffer=view8.slice(iovec.buf,iovec.buf+iovec.buf_len);if(this.file_pos+BigInt(buffer.byteLength)>this.file.size){const old=this.file.data;this.file.data=new Uint8Array(Number(this.file_pos+BigInt(buffer.byteLength)));this.file.data.set(old)}this.file.data.set(buffer.slice(0,Number(this.file.size-this.file_pos)),Number(this.file_pos));this.file_pos+=BigInt(buffer.byteLength);nwritten+=iovec.buf_len}return{ret:0,nwritten}}fd_filestat_get(){return{ret:0,filestat:this.file.stat()}}constructor(file){super();this.file_pos=0n;this.file=file}}export class OpenSyncOPFSFile extends Fd{fd_fdstat_get(){return{ret:0,fdstat:new wasi.Fdstat(wasi.FILETYPE_REGULAR_FILE,0)}}fd_filestat_get(){return{ret:0,filestat:new wasi.Filestat(wasi.FILETYPE_REGULAR_FILE,BigInt(this.file.handle.getSize()))}}fd_read(view8,iovs){let nread=0;for(const iovec of iovs){if(this.position<this.file.handle.getSize()){const buf=new Uint8Array(view8.buffer,iovec.buf,iovec.buf_len);const n=this.file.handle.read(buf,{at:Number(this.position)});this.position+=BigInt(n);nread+=n}else{break}}return{ret:0,nread}}fd_seek(offset,whence){let calculated_offset;switch(whence){case wasi.WHENCE_SET:calculated_offset=BigInt(offset);break;case wasi.WHENCE_CUR:calculated_offset=this.position+BigInt(offset);break;case wasi.WHENCE_END:calculated_offset=BigInt(this.file.handle.getSize())+BigInt(offset);break;default:return{ret:wasi.ERRNO_INVAL,offset:0n}}if(calculated_offset<0){return{ret:wasi.ERRNO_INVAL,offset:0n}}this.position=calculated_offset;return{ret:wasi.ERRNO_SUCCESS,offset:this.position}}fd_write(view8,iovs){let nwritten=0;if(this.file.readonly)return{ret:wasi.ERRNO_BADF,nwritten};for(const iovec of iovs){const buf=new Uint8Array(view8.buffer,iovec.buf,iovec.buf_len);const n=this.file.handle.write(buf,{at:Number(this.position)});this.position+=BigInt(n);nwritten+=n}return{ret:wasi.ERRNO_SUCCESS,nwritten}}fd_datasync(){this.file.handle.flush();return wasi.ERRNO_SUCCESS}fd_sync(){return this.fd_datasync()}fd_close(){return wasi.ERRNO_SUCCESS}constructor(file){super();this.position=0n;this.file=file}}export class OpenDirectory extends Fd{fd_fdstat_get(){return{ret:0,fdstat:new wasi.Fdstat(wasi.FILETYPE_DIRECTORY,0)}}fd_readdir_single(cookie){if(debug.enabled){debug.log(\"readdir_single\",cookie);debug.log(cookie,Object.keys(this.dir.contents))}debug.log(cookie,Object.keys(this.dir.contents).slice(Number(cookie)));if(cookie>=BigInt(Object.keys(this.dir.contents).length)){return{ret:0,dirent:null}}const name=Object.keys(this.dir.contents)[Number(cookie)];const entry=this.dir.contents[name];return{ret:0,dirent:new wasi.Dirent(cookie+1n,name,entry.stat().filetype)}}path_filestat_get(flags,path){const entry=this.dir.get_entry_for_path(path);if(entry==null){return{ret:wasi.ERRNO_NOENT,filestat:null}}return{ret:0,filestat:entry.stat()}}path_open(dirflags,path,oflags,fs_rights_base,fs_rights_inheriting,fd_flags){let entry=this.dir.get_entry_for_path(path);if(entry==null){if((oflags&wasi.OFLAGS_CREAT)==wasi.OFLAGS_CREAT){entry=this.dir.create_entry_for_path(path,(oflags&wasi.OFLAGS_DIRECTORY)==wasi.OFLAGS_DIRECTORY)}else{return{ret:wasi.ERRNO_NOENT,fd_obj:null}}}else if((oflags&wasi.OFLAGS_EXCL)==wasi.OFLAGS_EXCL){return{ret:wasi.ERRNO_EXIST,fd_obj:null}}if((oflags&wasi.OFLAGS_DIRECTORY)==wasi.OFLAGS_DIRECTORY&&entry.stat().filetype!==wasi.FILETYPE_DIRECTORY){return{ret:wasi.ERRNO_NOTDIR,fd_obj:null}}if(entry.readonly&&(fs_rights_base&BigInt(wasi.RIGHTS_FD_WRITE))==BigInt(wasi.RIGHTS_FD_WRITE)){return{ret:wasi.ERRNO_PERM,fd_obj:null}}if(!(entry instanceof Directory)&&(oflags&wasi.OFLAGS_TRUNC)==wasi.OFLAGS_TRUNC){const ret=entry.truncate();if(ret!=wasi.ERRNO_SUCCESS)return{ret,fd_obj:null}}return{ret:wasi.ERRNO_SUCCESS,fd_obj:entry.open(fd_flags)}}path_create_directory(path){return this.path_open(0,path,wasi.OFLAGS_CREAT|wasi.OFLAGS_DIRECTORY,0n,0n,0).ret}constructor(dir){super();this.dir=dir}}export class PreopenDirectory extends OpenDirectory{fd_prestat_get(){return{ret:0,prestat:wasi.Prestat.dir(this.prestat_name.length)}}fd_prestat_dir_name(){return{ret:0,prestat_dir_name:this.prestat_name}}constructor(name,contents){super(new Directory(contents));this.prestat_name=new TextEncoder().encode(name)}}","import{debug}from\"./debug.js\";import{OpenDirectory,OpenFile,OpenSyncOPFSFile}from\"./fs_fd.js\";import*as wasi from\"./wasi_defs.js\";export class File{open(fd_flags){const file=new OpenFile(this);if(fd_flags&wasi.FDFLAGS_APPEND)file.fd_seek(0n,wasi.WHENCE_END);return file}get size(){return BigInt(this.data.byteLength)}stat(){return new wasi.Filestat(wasi.FILETYPE_REGULAR_FILE,this.size)}truncate(){if(this.readonly)return wasi.ERRNO_PERM;this.data=new Uint8Array([]);return wasi.ERRNO_SUCCESS}constructor(data,options){this.data=new Uint8Array(data);this.readonly=!!options?.readonly}}export class SyncOPFSFile{open(fd_flags){const file=new OpenSyncOPFSFile(this);if(fd_flags&wasi.FDFLAGS_APPEND)file.fd_seek(0n,wasi.WHENCE_END);return file}get size(){return BigInt(this.handle.getSize())}stat(){return new wasi.Filestat(wasi.FILETYPE_REGULAR_FILE,this.size)}truncate(){if(this.readonly)return wasi.ERRNO_PERM;this.handle.truncate(0);return wasi.ERRNO_SUCCESS}constructor(handle,options){this.handle=handle;this.readonly=!!options?.readonly}}export class Directory{open(fd_flags){return new OpenDirectory(this)}stat(){return new wasi.Filestat(wasi.FILETYPE_DIRECTORY,0n)}get_entry_for_path(path){let entry=this;for(const component of path.split(\"/\")){if(component==\"\")break;if(component==\".\")continue;if(!(entry instanceof Directory)){return null}if(entry.contents[component]!=undefined){entry=entry.contents[component]}else{debug.log(component);return null}}return entry}create_entry_for_path(path,is_dir){let entry=this;const components=path.split(\"/\").filter(component=>component!=\"/\");for(let i=0;i<components.length;i++){const component=components[i];if(!(entry instanceof Directory)){break}if(entry.contents[component]!=undefined){entry=entry.contents[component]}else{debug.log(\"create\",component);if(i==components.length-1&&!is_dir){entry.contents[component]=new File(new ArrayBuffer(0))}else{entry.contents[component]=new Directory({})}entry=entry.contents[component]}}return entry}constructor(contents){this.readonly=false;this.contents=contents}}","let DATA_VIEW = new DataView(new ArrayBuffer());\n\nfunction data_view(mem) {\n  if (DATA_VIEW.buffer !== mem.buffer) DATA_VIEW = new DataView(mem.buffer);\n  return DATA_VIEW;\n}\n\nfunction to_uint32(val) {\n  return val >>> 0;\n}\nconst UTF8_DECODER = new TextDecoder('utf-8');\n\nconst UTF8_ENCODER = new TextEncoder('utf-8');\n\nfunction utf8_encode(s, realloc, memory) {\n  if (typeof s !== 'string') throw new TypeError('expected a string');\n  \n  if (s.length === 0) {\n    UTF8_ENCODED_LEN = 0;\n    return 1;\n  }\n  \n  let alloc_len = 0;\n  let ptr = 0;\n  let writtenTotal = 0;\n  while (s.length > 0) {\n    ptr = realloc(ptr, alloc_len, 1, alloc_len + s.length);\n    alloc_len += s.length;\n    const { read, written } = UTF8_ENCODER.encodeInto(\n    s,\n    new Uint8Array(memory.buffer, ptr + writtenTotal, alloc_len - writtenTotal),\n    );\n    writtenTotal += written;\n    s = s.slice(read);\n  }\n  if (alloc_len > writtenTotal)\n  ptr = realloc(ptr, alloc_len, 1, writtenTotal);\n  UTF8_ENCODED_LEN = writtenTotal;\n  return ptr;\n}\nlet UTF8_ENCODED_LEN = 0;\n\nclass Slab {\n  constructor() {\n    this.list = [];\n    this.head = 0;\n  }\n  \n  insert(val) {\n    if (this.head >= this.list.length) {\n      this.list.push({\n        next: this.list.length + 1,\n        val: undefined,\n      });\n    }\n    const ret = this.head;\n    const slot = this.list[ret];\n    this.head = slot.next;\n    slot.next = -1;\n    slot.val = val;\n    return ret;\n  }\n  \n  get(idx) {\n    if (idx >= this.list.length)\n    throw new RangeError('handle index not valid');\n    const slot = this.list[idx];\n    if (slot.next === -1)\n    return slot.val;\n    throw new RangeError('handle index not valid');\n  }\n  \n  remove(idx) {\n    const ret = this.get(idx); // validate the slot\n    const slot = this.list[idx];\n    slot.val = undefined;\n    slot.next = this.head;\n    this.head = idx;\n    return ret;\n  }\n}\n\nfunction throw_invalid_bool() {\n  throw new RangeError(\"invalid variant discriminant for bool\");\n}\n\nclass RbAbiGuest {\n  constructor() {\n    this._resource0_slab = new Slab();\n    this._resource1_slab = new Slab();\n  }\n  addToImports(imports) {\n    if (!(\"canonical_abi\" in imports)) imports[\"canonical_abi\"] = {};\n    \n    imports.canonical_abi['resource_drop_rb-iseq'] = i => {\n      this._resource0_slab.remove(i).drop();\n    };\n    imports.canonical_abi['resource_clone_rb-iseq'] = i => {\n      const obj = this._resource0_slab.get(i);\n      return this._resource0_slab.insert(obj.clone())\n    };\n    imports.canonical_abi['resource_get_rb-iseq'] = i => {\n      return this._resource0_slab.get(i)._wasm_val;\n    };\n    imports.canonical_abi['resource_new_rb-iseq'] = i => {\n      this._registry0;\n      return this._resource0_slab.insert(new RbIseq(i, this));\n    };\n    \n    imports.canonical_abi['resource_drop_rb-abi-value'] = i => {\n      this._resource1_slab.remove(i).drop();\n    };\n    imports.canonical_abi['resource_clone_rb-abi-value'] = i => {\n      const obj = this._resource1_slab.get(i);\n      return this._resource1_slab.insert(obj.clone())\n    };\n    imports.canonical_abi['resource_get_rb-abi-value'] = i => {\n      return this._resource1_slab.get(i)._wasm_val;\n    };\n    imports.canonical_abi['resource_new_rb-abi-value'] = i => {\n      this._registry1;\n      return this._resource1_slab.insert(new RbAbiValue(i, this));\n    };\n  }\n  \n  async instantiate(module, imports) {\n    imports = imports || {};\n    this.addToImports(imports);\n    \n    if (module instanceof WebAssembly.Instance) {\n      this.instance = module;\n    } else if (module instanceof WebAssembly.Module) {\n      this.instance = await WebAssembly.instantiate(module, imports);\n    } else if (module instanceof ArrayBuffer || module instanceof Uint8Array) {\n      const { instance } = await WebAssembly.instantiate(module, imports);\n      this.instance = instance;\n    } else {\n      const { instance } = await WebAssembly.instantiateStreaming(module, imports);\n      this.instance = instance;\n    }\n    this._exports = this.instance.exports;\n    this._registry0 = new FinalizationRegistry(this._exports['canonical_abi_drop_rb-iseq']);\n    this._registry1 = new FinalizationRegistry(this._exports['canonical_abi_drop_rb-abi-value']);\n  }\n  rubyShowVersion() {\n    this._exports['ruby-show-version: func() -> ()']();\n  }\n  rubyInit() {\n    this._exports['ruby-init: func() -> ()']();\n  }\n  rubySysinit(arg0) {\n    const memory = this._exports.memory;\n    const realloc = this._exports[\"cabi_realloc\"];\n    const vec1 = arg0;\n    const len1 = vec1.length;\n    const result1 = realloc(0, 0, 4, len1 * 8);\n    for (let i = 0; i < vec1.length; i++) {\n      const e = vec1[i];\n      const base = result1 + i * 8;\n      const ptr0 = utf8_encode(e, realloc, memory);\n      const len0 = UTF8_ENCODED_LEN;\n      data_view(memory).setInt32(base + 4, len0, true);\n      data_view(memory).setInt32(base + 0, ptr0, true);\n    }\n    this._exports['ruby-sysinit: func(args: list<string>) -> ()'](result1, len1);\n  }\n  rubyOptions(arg0) {\n    const memory = this._exports.memory;\n    const realloc = this._exports[\"cabi_realloc\"];\n    const vec1 = arg0;\n    const len1 = vec1.length;\n    const result1 = realloc(0, 0, 4, len1 * 8);\n    for (let i = 0; i < vec1.length; i++) {\n      const e = vec1[i];\n      const base = result1 + i * 8;\n      const ptr0 = utf8_encode(e, realloc, memory);\n      const len0 = UTF8_ENCODED_LEN;\n      data_view(memory).setInt32(base + 4, len0, true);\n      data_view(memory).setInt32(base + 0, ptr0, true);\n    }\n    const ret = this._exports['ruby-options: func(args: list<string>) -> handle<rb-iseq>'](result1, len1);\n    return this._resource0_slab.remove(ret);\n  }\n  rubyScript(arg0) {\n    const memory = this._exports.memory;\n    const realloc = this._exports[\"cabi_realloc\"];\n    const ptr0 = utf8_encode(arg0, realloc, memory);\n    const len0 = UTF8_ENCODED_LEN;\n    this._exports['ruby-script: func(name: string) -> ()'](ptr0, len0);\n  }\n  rubyInitLoadpath() {\n    this._exports['ruby-init-loadpath: func() -> ()']();\n  }\n  rbEvalStringProtect(arg0) {\n    const memory = this._exports.memory;\n    const realloc = this._exports[\"cabi_realloc\"];\n    const ptr0 = utf8_encode(arg0, realloc, memory);\n    const len0 = UTF8_ENCODED_LEN;\n    const ret = this._exports['rb-eval-string-protect: func(str: string) -> tuple<handle<rb-abi-value>, s32>'](ptr0, len0);\n    return [this._resource1_slab.remove(data_view(memory).getInt32(ret + 0, true)), data_view(memory).getInt32(ret + 4, true)];\n  }\n  rbFuncallvProtect(arg0, arg1, arg2) {\n    const memory = this._exports.memory;\n    const realloc = this._exports[\"cabi_realloc\"];\n    const obj0 = arg0;\n    if (!(obj0 instanceof RbAbiValue)) throw new TypeError('expected instance of RbAbiValue');\n    const vec2 = arg2;\n    const len2 = vec2.length;\n    const result2 = realloc(0, 0, 4, len2 * 4);\n    for (let i = 0; i < vec2.length; i++) {\n      const e = vec2[i];\n      const base = result2 + i * 4;\n      const obj1 = e;\n      if (!(obj1 instanceof RbAbiValue)) throw new TypeError('expected instance of RbAbiValue');\n      data_view(memory).setInt32(base + 0, this._resource1_slab.insert(obj1.clone()), true);\n    }\n    const ret = this._exports['rb-funcallv-protect: func(recv: handle<rb-abi-value>, mid: u32, args: list<handle<rb-abi-value>>) -> tuple<handle<rb-abi-value>, s32>'](this._resource1_slab.insert(obj0.clone()), to_uint32(arg1), result2, len2);\n    return [this._resource1_slab.remove(data_view(memory).getInt32(ret + 0, true)), data_view(memory).getInt32(ret + 4, true)];\n  }\n  rbIntern(arg0) {\n    const memory = this._exports.memory;\n    const realloc = this._exports[\"cabi_realloc\"];\n    const ptr0 = utf8_encode(arg0, realloc, memory);\n    const len0 = UTF8_ENCODED_LEN;\n    const ret = this._exports['rb-intern: func(name: string) -> u32'](ptr0, len0);\n    return ret >>> 0;\n  }\n  rbErrinfo() {\n    const ret = this._exports['rb-errinfo: func() -> handle<rb-abi-value>']();\n    return this._resource1_slab.remove(ret);\n  }\n  rbClearErrinfo() {\n    this._exports['rb-clear-errinfo: func() -> ()']();\n  }\n  rstringPtr(arg0) {\n    const memory = this._exports.memory;\n    const obj0 = arg0;\n    if (!(obj0 instanceof RbAbiValue)) throw new TypeError('expected instance of RbAbiValue');\n    const ret = this._exports['rstring-ptr: func(value: handle<rb-abi-value>) -> string'](this._resource1_slab.insert(obj0.clone()));\n    const ptr1 = data_view(memory).getInt32(ret + 0, true);\n    const len1 = data_view(memory).getInt32(ret + 4, true);\n    const result1 = UTF8_DECODER.decode(new Uint8Array(memory.buffer, ptr1, len1));\n    this._exports[\"cabi_post_rstring-ptr\"](ret);\n    return result1;\n  }\n  rbVmBugreport() {\n    this._exports['rb-vm-bugreport: func() -> ()']();\n  }\n  rbGcEnable() {\n    const ret = this._exports['rb-gc-enable: func() -> bool']();\n    const bool0 = ret;\n    return bool0 == 0 ? false : (bool0 == 1 ? true : throw_invalid_bool());\n  }\n  rbGcDisable() {\n    const ret = this._exports['rb-gc-disable: func() -> bool']();\n    const bool0 = ret;\n    return bool0 == 0 ? false : (bool0 == 1 ? true : throw_invalid_bool());\n  }\n  rbSetShouldProhibitRewind(arg0) {\n    const ret = this._exports['rb-set-should-prohibit-rewind: func(new-value: bool) -> bool'](arg0 ? 1 : 0);\n    const bool0 = ret;\n    return bool0 == 0 ? false : (bool0 == 1 ? true : throw_invalid_bool());\n  }\n}\n\nclass RbIseq {\n  constructor(wasm_val, obj) {\n    this._wasm_val = wasm_val;\n    this._obj = obj;\n    this._refcnt = 1;\n    obj._registry0.register(this, wasm_val, this);\n  }\n  \n  clone() {\n    this._refcnt += 1;\n    return this;\n  }\n  \n  drop() {\n    this._refcnt -= 1;\n    if (this._refcnt !== 0)\n    return;\n    this._obj._registry0.unregister(this);\n    const dtor = this._obj._exports['canonical_abi_drop_rb-iseq'];\n    const wasm_val = this._wasm_val;\n    delete this._obj;\n    delete this._refcnt;\n    delete this._wasm_val;\n    dtor(wasm_val);\n  }\n}\n\nclass RbAbiValue {\n  constructor(wasm_val, obj) {\n    this._wasm_val = wasm_val;\n    this._obj = obj;\n    this._refcnt = 1;\n    obj._registry1.register(this, wasm_val, this);\n  }\n  \n  clone() {\n    this._refcnt += 1;\n    return this;\n  }\n  \n  drop() {\n    this._refcnt -= 1;\n    if (this._refcnt !== 0)\n    return;\n    this._obj._registry1.unregister(this);\n    const dtor = this._obj._exports['canonical_abi_drop_rb-abi-value'];\n    const wasm_val = this._wasm_val;\n    delete this._obj;\n    delete this._refcnt;\n    delete this._wasm_val;\n    dtor(wasm_val);\n  }\n}\n\nfunction addRbJsAbiHostToImports(imports, obj, get_export) {\n  if (!(\"rb-js-abi-host\" in imports)) imports[\"rb-js-abi-host\"] = {};\n  imports[\"rb-js-abi-host\"][\"eval-js: func(code: string) -> variant { success(handle<js-abi-value>), failure(handle<js-abi-value>) }\"] = function(arg0, arg1, arg2) {\n    const memory = get_export(\"memory\");\n    const ptr0 = arg0;\n    const len0 = arg1;\n    const result0 = UTF8_DECODER.decode(new Uint8Array(memory.buffer, ptr0, len0));\n    const ret0 = obj.evalJs(result0);\n    const variant1 = ret0;\n    switch (variant1.tag) {\n      case \"success\": {\n        const e = variant1.val;\n        data_view(memory).setInt8(arg2 + 0, 0, true);\n        data_view(memory).setInt32(arg2 + 4, resources0.insert(e), true);\n        break;\n      }\n      case \"failure\": {\n        const e = variant1.val;\n        data_view(memory).setInt8(arg2 + 0, 1, true);\n        data_view(memory).setInt32(arg2 + 4, resources0.insert(e), true);\n        break;\n      }\n      default:\n      throw new RangeError(\"invalid variant specified for JsAbiResult\");\n    }\n  };\n  imports[\"rb-js-abi-host\"][\"is-js: func(value: handle<js-abi-value>) -> bool\"] = function(arg0) {\n    const ret0 = obj.isJs(resources0.get(arg0));\n    return ret0 ? 1 : 0;\n  };\n  imports[\"rb-js-abi-host\"][\"instance-of: func(value: handle<js-abi-value>, klass: handle<js-abi-value>) -> bool\"] = function(arg0, arg1) {\n    const ret0 = obj.instanceOf(resources0.get(arg0), resources0.get(arg1));\n    return ret0 ? 1 : 0;\n  };\n  imports[\"rb-js-abi-host\"][\"global-this: func() -> handle<js-abi-value>\"] = function() {\n    const ret0 = obj.globalThis();\n    return resources0.insert(ret0);\n  };\n  imports[\"rb-js-abi-host\"][\"int-to-js-number: func(value: s32) -> handle<js-abi-value>\"] = function(arg0) {\n    const ret0 = obj.intToJsNumber(arg0);\n    return resources0.insert(ret0);\n  };\n  imports[\"rb-js-abi-host\"][\"float-to-js-number: func(value: float64) -> handle<js-abi-value>\"] = function(arg0) {\n    const ret0 = obj.floatToJsNumber(arg0);\n    return resources0.insert(ret0);\n  };\n  imports[\"rb-js-abi-host\"][\"string-to-js-string: func(value: string) -> handle<js-abi-value>\"] = function(arg0, arg1) {\n    const memory = get_export(\"memory\");\n    const ptr0 = arg0;\n    const len0 = arg1;\n    const result0 = UTF8_DECODER.decode(new Uint8Array(memory.buffer, ptr0, len0));\n    const ret0 = obj.stringToJsString(result0);\n    return resources0.insert(ret0);\n  };\n  imports[\"rb-js-abi-host\"][\"bool-to-js-bool: func(value: bool) -> handle<js-abi-value>\"] = function(arg0) {\n    const bool0 = arg0;\n    const ret0 = obj.boolToJsBool(bool0 == 0 ? false : (bool0 == 1 ? true : throw_invalid_bool()));\n    return resources0.insert(ret0);\n  };\n  imports[\"rb-js-abi-host\"][\"proc-to-js-function: func(value: u32) -> handle<js-abi-value>\"] = function(arg0) {\n    const ret0 = obj.procToJsFunction(arg0 >>> 0);\n    return resources0.insert(ret0);\n  };\n  imports[\"rb-js-abi-host\"][\"rb-object-to-js-rb-value: func(raw-rb-abi-value: u32) -> handle<js-abi-value>\"] = function(arg0) {\n    const ret0 = obj.rbObjectToJsRbValue(arg0 >>> 0);\n    return resources0.insert(ret0);\n  };\n  imports[\"rb-js-abi-host\"][\"js-value-to-string: func(value: handle<js-abi-value>) -> string\"] = function(arg0, arg1) {\n    const memory = get_export(\"memory\");\n    const realloc = get_export(\"cabi_realloc\");\n    const ret0 = obj.jsValueToString(resources0.get(arg0));\n    const ptr0 = utf8_encode(ret0, realloc, memory);\n    const len0 = UTF8_ENCODED_LEN;\n    data_view(memory).setInt32(arg1 + 4, len0, true);\n    data_view(memory).setInt32(arg1 + 0, ptr0, true);\n  };\n  imports[\"rb-js-abi-host\"][\"js-value-to-integer: func(value: handle<js-abi-value>) -> variant { f64(float64), bignum(string) }\"] = function(arg0, arg1) {\n    const memory = get_export(\"memory\");\n    const realloc = get_export(\"cabi_realloc\");\n    const ret0 = obj.jsValueToInteger(resources0.get(arg0));\n    const variant1 = ret0;\n    switch (variant1.tag) {\n      case \"f64\": {\n        const e = variant1.val;\n        data_view(memory).setInt8(arg1 + 0, 0, true);\n        data_view(memory).setFloat64(arg1 + 8, +e, true);\n        break;\n      }\n      case \"bignum\": {\n        const e = variant1.val;\n        data_view(memory).setInt8(arg1 + 0, 1, true);\n        const ptr0 = utf8_encode(e, realloc, memory);\n        const len0 = UTF8_ENCODED_LEN;\n        data_view(memory).setInt32(arg1 + 12, len0, true);\n        data_view(memory).setInt32(arg1 + 8, ptr0, true);\n        break;\n      }\n      default:\n      throw new RangeError(\"invalid variant specified for RawInteger\");\n    }\n  };\n  imports[\"rb-js-abi-host\"][\"export-js-value-to-host: func(value: handle<js-abi-value>) -> ()\"] = function(arg0) {\n    obj.exportJsValueToHost(resources0.get(arg0));\n  };\n  imports[\"rb-js-abi-host\"][\"import-js-value-from-host: func() -> handle<js-abi-value>\"] = function() {\n    const ret0 = obj.importJsValueFromHost();\n    return resources0.insert(ret0);\n  };\n  imports[\"rb-js-abi-host\"][\"js-value-typeof: func(value: handle<js-abi-value>) -> string\"] = function(arg0, arg1) {\n    const memory = get_export(\"memory\");\n    const realloc = get_export(\"cabi_realloc\");\n    const ret0 = obj.jsValueTypeof(resources0.get(arg0));\n    const ptr0 = utf8_encode(ret0, realloc, memory);\n    const len0 = UTF8_ENCODED_LEN;\n    data_view(memory).setInt32(arg1 + 4, len0, true);\n    data_view(memory).setInt32(arg1 + 0, ptr0, true);\n  };\n  imports[\"rb-js-abi-host\"][\"js-value-equal: func(lhs: handle<js-abi-value>, rhs: handle<js-abi-value>) -> bool\"] = function(arg0, arg1) {\n    const ret0 = obj.jsValueEqual(resources0.get(arg0), resources0.get(arg1));\n    return ret0 ? 1 : 0;\n  };\n  imports[\"rb-js-abi-host\"][\"js-value-strictly-equal: func(lhs: handle<js-abi-value>, rhs: handle<js-abi-value>) -> bool\"] = function(arg0, arg1) {\n    const ret0 = obj.jsValueStrictlyEqual(resources0.get(arg0), resources0.get(arg1));\n    return ret0 ? 1 : 0;\n  };\n  imports[\"rb-js-abi-host\"][\"reflect-apply: func(target: handle<js-abi-value>, this-argument: handle<js-abi-value>, arguments: list<handle<js-abi-value>>) -> variant { success(handle<js-abi-value>), failure(handle<js-abi-value>) }\"] = function(arg0, arg1, arg2, arg3, arg4) {\n    const memory = get_export(\"memory\");\n    const len0 = arg3;\n    const base0 = arg2;\n    const result0 = [];\n    for (let i = 0; i < len0; i++) {\n      const base = base0 + i * 4;\n      result0.push(resources0.get(data_view(memory).getInt32(base + 0, true)));\n    }\n    const ret0 = obj.reflectApply(resources0.get(arg0), resources0.get(arg1), result0);\n    const variant1 = ret0;\n    switch (variant1.tag) {\n      case \"success\": {\n        const e = variant1.val;\n        data_view(memory).setInt8(arg4 + 0, 0, true);\n        data_view(memory).setInt32(arg4 + 4, resources0.insert(e), true);\n        break;\n      }\n      case \"failure\": {\n        const e = variant1.val;\n        data_view(memory).setInt8(arg4 + 0, 1, true);\n        data_view(memory).setInt32(arg4 + 4, resources0.insert(e), true);\n        break;\n      }\n      default:\n      throw new RangeError(\"invalid variant specified for JsAbiResult\");\n    }\n  };\n  imports[\"rb-js-abi-host\"][\"reflect-construct: func(target: handle<js-abi-value>, arguments: list<handle<js-abi-value>>) -> handle<js-abi-value>\"] = function(arg0, arg1, arg2) {\n    const memory = get_export(\"memory\");\n    const len0 = arg2;\n    const base0 = arg1;\n    const result0 = [];\n    for (let i = 0; i < len0; i++) {\n      const base = base0 + i * 4;\n      result0.push(resources0.get(data_view(memory).getInt32(base + 0, true)));\n    }\n    const ret0 = obj.reflectConstruct(resources0.get(arg0), result0);\n    return resources0.insert(ret0);\n  };\n  imports[\"rb-js-abi-host\"][\"reflect-delete-property: func(target: handle<js-abi-value>, property-key: string) -> bool\"] = function(arg0, arg1, arg2) {\n    const memory = get_export(\"memory\");\n    const ptr0 = arg1;\n    const len0 = arg2;\n    const result0 = UTF8_DECODER.decode(new Uint8Array(memory.buffer, ptr0, len0));\n    const ret0 = obj.reflectDeleteProperty(resources0.get(arg0), result0);\n    return ret0 ? 1 : 0;\n  };\n  imports[\"rb-js-abi-host\"][\"reflect-get: func(target: handle<js-abi-value>, property-key: string) -> variant { success(handle<js-abi-value>), failure(handle<js-abi-value>) }\"] = function(arg0, arg1, arg2, arg3) {\n    const memory = get_export(\"memory\");\n    const ptr0 = arg1;\n    const len0 = arg2;\n    const result0 = UTF8_DECODER.decode(new Uint8Array(memory.buffer, ptr0, len0));\n    const ret0 = obj.reflectGet(resources0.get(arg0), result0);\n    const variant1 = ret0;\n    switch (variant1.tag) {\n      case \"success\": {\n        const e = variant1.val;\n        data_view(memory).setInt8(arg3 + 0, 0, true);\n        data_view(memory).setInt32(arg3 + 4, resources0.insert(e), true);\n        break;\n      }\n      case \"failure\": {\n        const e = variant1.val;\n        data_view(memory).setInt8(arg3 + 0, 1, true);\n        data_view(memory).setInt32(arg3 + 4, resources0.insert(e), true);\n        break;\n      }\n      default:\n      throw new RangeError(\"invalid variant specified for JsAbiResult\");\n    }\n  };\n  imports[\"rb-js-abi-host\"][\"reflect-get-own-property-descriptor: func(target: handle<js-abi-value>, property-key: string) -> handle<js-abi-value>\"] = function(arg0, arg1, arg2) {\n    const memory = get_export(\"memory\");\n    const ptr0 = arg1;\n    const len0 = arg2;\n    const result0 = UTF8_DECODER.decode(new Uint8Array(memory.buffer, ptr0, len0));\n    const ret0 = obj.reflectGetOwnPropertyDescriptor(resources0.get(arg0), result0);\n    return resources0.insert(ret0);\n  };\n  imports[\"rb-js-abi-host\"][\"reflect-get-prototype-of: func(target: handle<js-abi-value>) -> handle<js-abi-value>\"] = function(arg0) {\n    const ret0 = obj.reflectGetPrototypeOf(resources0.get(arg0));\n    return resources0.insert(ret0);\n  };\n  imports[\"rb-js-abi-host\"][\"reflect-has: func(target: handle<js-abi-value>, property-key: string) -> bool\"] = function(arg0, arg1, arg2) {\n    const memory = get_export(\"memory\");\n    const ptr0 = arg1;\n    const len0 = arg2;\n    const result0 = UTF8_DECODER.decode(new Uint8Array(memory.buffer, ptr0, len0));\n    const ret0 = obj.reflectHas(resources0.get(arg0), result0);\n    return ret0 ? 1 : 0;\n  };\n  imports[\"rb-js-abi-host\"][\"reflect-is-extensible: func(target: handle<js-abi-value>) -> bool\"] = function(arg0) {\n    const ret0 = obj.reflectIsExtensible(resources0.get(arg0));\n    return ret0 ? 1 : 0;\n  };\n  imports[\"rb-js-abi-host\"][\"reflect-own-keys: func(target: handle<js-abi-value>) -> list<handle<js-abi-value>>\"] = function(arg0, arg1) {\n    const memory = get_export(\"memory\");\n    const realloc = get_export(\"cabi_realloc\");\n    const ret0 = obj.reflectOwnKeys(resources0.get(arg0));\n    const vec0 = ret0;\n    const len0 = vec0.length;\n    const result0 = realloc(0, 0, 4, len0 * 4);\n    for (let i = 0; i < vec0.length; i++) {\n      const e = vec0[i];\n      const base = result0 + i * 4;\n      data_view(memory).setInt32(base + 0, resources0.insert(e), true);\n    }\n    data_view(memory).setInt32(arg1 + 4, len0, true);\n    data_view(memory).setInt32(arg1 + 0, result0, true);\n  };\n  imports[\"rb-js-abi-host\"][\"reflect-prevent-extensions: func(target: handle<js-abi-value>) -> bool\"] = function(arg0) {\n    const ret0 = obj.reflectPreventExtensions(resources0.get(arg0));\n    return ret0 ? 1 : 0;\n  };\n  imports[\"rb-js-abi-host\"][\"reflect-set: func(target: handle<js-abi-value>, property-key: string, value: handle<js-abi-value>) -> variant { success(handle<js-abi-value>), failure(handle<js-abi-value>) }\"] = function(arg0, arg1, arg2, arg3, arg4) {\n    const memory = get_export(\"memory\");\n    const ptr0 = arg1;\n    const len0 = arg2;\n    const result0 = UTF8_DECODER.decode(new Uint8Array(memory.buffer, ptr0, len0));\n    const ret0 = obj.reflectSet(resources0.get(arg0), result0, resources0.get(arg3));\n    const variant1 = ret0;\n    switch (variant1.tag) {\n      case \"success\": {\n        const e = variant1.val;\n        data_view(memory).setInt8(arg4 + 0, 0, true);\n        data_view(memory).setInt32(arg4 + 4, resources0.insert(e), true);\n        break;\n      }\n      case \"failure\": {\n        const e = variant1.val;\n        data_view(memory).setInt8(arg4 + 0, 1, true);\n        data_view(memory).setInt32(arg4 + 4, resources0.insert(e), true);\n        break;\n      }\n      default:\n      throw new RangeError(\"invalid variant specified for JsAbiResult\");\n    }\n  };\n  imports[\"rb-js-abi-host\"][\"reflect-set-prototype-of: func(target: handle<js-abi-value>, prototype: handle<js-abi-value>) -> bool\"] = function(arg0, arg1) {\n    const ret0 = obj.reflectSetPrototypeOf(resources0.get(arg0), resources0.get(arg1));\n    return ret0 ? 1 : 0;\n  };\n  if (!(\"canonical_abi\" in imports)) imports[\"canonical_abi\"] = {};\n  \n  const resources0 = new Slab();\n  imports.canonical_abi[\"resource_drop_js-abi-value\"] = (i) => {\n    const val = resources0.remove(i);\n    if (obj.dropJsAbiValue)\n    obj.dropJsAbiValue(val);\n  };\n}\n\n/**\n * A Ruby VM instance\n *\n * @example\n *\n * const wasi = new WASI();\n * const vm = new RubyVM();\n * const imports = {\n *   wasi_snapshot_preview1: wasi.wasiImport,\n * };\n *\n * vm.addToImports(imports);\n *\n * const instance = await WebAssembly.instantiate(rubyModule, imports);\n * await vm.setInstance(instance);\n * wasi.initialize(instance);\n * vm.initialize();\n *\n */\nclass RubyVM {\n    constructor() {\n        this.instance = null;\n        this.interfaceState = {\n            hasJSFrameAfterRbFrame: false,\n        };\n        // Wrap exported functions from Ruby VM to prohibit nested VM operation\n        // if the call stack has sandwitched JS frames like JS -> Ruby -> JS -> Ruby.\n        const proxyExports = (exports) => {\n            const excludedMethods = [\n                \"addToImports\",\n                \"instantiate\",\n                \"rbSetShouldProhibitRewind\",\n                \"rbGcDisable\",\n                \"rbGcEnable\",\n            ];\n            const excluded = [\"constructor\"].concat(excludedMethods);\n            // wrap all methods in RbAbi.RbAbiGuest class\n            for (const key of Object.getOwnPropertyNames(RbAbiGuest.prototype)) {\n                if (excluded.includes(key)) {\n                    continue;\n                }\n                const value = exports[key];\n                if (typeof value === \"function\") {\n                    exports[key] = (...args) => {\n                        const isNestedVMCall = this.interfaceState.hasJSFrameAfterRbFrame;\n                        if (isNestedVMCall) {\n                            const oldShouldProhibitRewind = this.guest.rbSetShouldProhibitRewind(true);\n                            const oldIsDisabledGc = this.guest.rbGcDisable();\n                            const result = Reflect.apply(value, exports, args);\n                            this.guest.rbSetShouldProhibitRewind(oldShouldProhibitRewind);\n                            if (!oldIsDisabledGc) {\n                                this.guest.rbGcEnable();\n                            }\n                            return result;\n                        }\n                        else {\n                            return Reflect.apply(value, exports, args);\n                        }\n                    };\n                }\n            }\n            return exports;\n        };\n        this.guest = proxyExports(new RbAbiGuest());\n        this.transport = new JsValueTransport();\n        this.exceptionFormatter = new RbExceptionFormatter();\n    }\n    /**\n     * Initialize the Ruby VM with the given command line arguments\n     * @param args The command line arguments to pass to Ruby. Must be\n     * an array of strings starting with the Ruby program name.\n     */\n    initialize(args = [\"ruby.wasm\", \"--disable-gems\", \"-EUTF-8\", \"-e_=0\"]) {\n        const c_args = args.map((arg) => arg + \"\\0\");\n        this.guest.rubyInit();\n        this.guest.rubySysinit(c_args);\n        this.guest.rubyOptions(c_args);\n    }\n    /**\n     * Set a given instance to interact JavaScript and Ruby's\n     * WebAssembly instance. This method must be called before calling\n     * Ruby API.\n     *\n     * @param instance The WebAssembly instance to interact with. Must\n     * be instantiated from a Ruby built with JS extension, and built\n     * with Reactor ABI instead of command line.\n     */\n    async setInstance(instance) {\n        this.instance = instance;\n        await this.guest.instantiate(instance);\n    }\n    /**\n     * Add intrinsic import entries, which is necessary to interact JavaScript\n     * and Ruby's WebAssembly instance.\n     * @param imports The import object to add to the WebAssembly instance\n     */\n    addToImports(imports) {\n        this.guest.addToImports(imports);\n        function wrapTry(f) {\n            return (...args) => {\n                try {\n                    return { tag: \"success\", val: f(...args) };\n                }\n                catch (e) {\n                    if (e instanceof RbFatalError) {\n                        // RbFatalError should not be caught by Ruby because it Ruby VM\n                        // can be already in an inconsistent state.\n                        throw e;\n                    }\n                    return { tag: \"failure\", val: e };\n                }\n            };\n        }\n        imports[\"rb-js-abi-host\"] = {\n            rb_wasm_throw_prohibit_rewind_exception: (messagePtr, messageLen) => {\n                const memory = this.instance.exports.memory;\n                const str = new TextDecoder().decode(new Uint8Array(memory.buffer, messagePtr, messageLen));\n                throw new RbFatalError(\"Ruby APIs that may rewind the VM stack are prohibited under nested VM operation \" +\n                    `(${str})\\n` +\n                    \"Nested VM operation means that the call stack has sandwitched JS frames like JS -> Ruby -> JS -> Ruby \" +\n                    \"caused by something like `window.rubyVM.eval(\\\"JS.global[:rubyVM].eval('Fiber.yield')\\\")`\\n\" +\n                    \"\\n\" +\n                    \"Please check your call stack and make sure that you are **not** doing any of the following inside the nested Ruby frame:\\n\" +\n                    \"  1. Switching fibers (e.g. Fiber#resume, Fiber.yield, and Fiber#transfer)\\n\" +\n                    \"     Note that `evalAsync` JS API switches fibers internally\\n\" +\n                    \"  2. Raising uncaught exceptions\\n\" +\n                    \"     Please catch all exceptions inside the nested operation\\n\" +\n                    \"  3. Calling Continuation APIs\\n\");\n            },\n        };\n        // NOTE: The GC may collect objects that are still referenced by Wasm\n        // locals because Asyncify cannot scan the Wasm stack above the JS frame.\n        // So we need to keep track whether the JS frame is sandwitched by Ruby\n        // frames or not, and prohibit nested VM operation if it is.\n        const proxyImports = (imports) => {\n            for (const [key, value] of Object.entries(imports)) {\n                if (typeof value === \"function\") {\n                    imports[key] = (...args) => {\n                        const oldValue = this.interfaceState.hasJSFrameAfterRbFrame;\n                        this.interfaceState.hasJSFrameAfterRbFrame = true;\n                        const result = Reflect.apply(value, imports, args);\n                        this.interfaceState.hasJSFrameAfterRbFrame = oldValue;\n                        return result;\n                    };\n                }\n            }\n            return imports;\n        };\n        addRbJsAbiHostToImports(imports, proxyImports({\n            evalJs: wrapTry((code) => {\n                return Function(code)();\n            }),\n            isJs: (value) => {\n                // Just for compatibility with the old JS API\n                return true;\n            },\n            globalThis: () => {\n                if (typeof globalThis !== \"undefined\") {\n                    return globalThis;\n                }\n                else if (typeof global !== \"undefined\") {\n                    return global;\n                }\n                else if (typeof window !== \"undefined\") {\n                    return window;\n                }\n                throw new Error(\"unable to locate global object\");\n            },\n            intToJsNumber: (value) => {\n                return value;\n            },\n            floatToJsNumber: (value) => {\n                return value;\n            },\n            stringToJsString: (value) => {\n                return value;\n            },\n            boolToJsBool: (value) => {\n                return value;\n            },\n            procToJsFunction: (rawRbAbiValue) => {\n                const rbValue = this.rbValueOfPointer(rawRbAbiValue);\n                return (...args) => {\n                    rbValue.call(\"call\", ...args.map((arg) => this.wrap(arg)));\n                };\n            },\n            rbObjectToJsRbValue: (rawRbAbiValue) => {\n                return this.rbValueOfPointer(rawRbAbiValue);\n            },\n            jsValueToString: (value) => {\n                // According to the [spec](https://tc39.es/ecma262/multipage/text-processing.html#sec-string-constructor-string-value)\n                // `String(value)` always returns a string.\n                return String(value);\n            },\n            jsValueToInteger(value) {\n                if (typeof value === \"number\") {\n                    return { tag: \"f64\", val: value };\n                }\n                else if (typeof value === \"bigint\") {\n                    return { tag: \"bignum\", val: BigInt(value).toString(10) + \"\\0\" };\n                }\n                else if (typeof value === \"string\") {\n                    return { tag: \"bignum\", val: value + \"\\0\" };\n                }\n                else if (typeof value === \"undefined\") {\n                    return { tag: \"f64\", val: 0 };\n                }\n                else {\n                    return { tag: \"f64\", val: Number(value) };\n                }\n            },\n            exportJsValueToHost: (value) => {\n                // See `JsValueExporter` for the reason why we need to do this\n                this.transport.takeJsValue(value);\n            },\n            importJsValueFromHost: () => {\n                return this.transport.consumeJsValue();\n            },\n            instanceOf: (value, klass) => {\n                if (typeof klass === \"function\") {\n                    return value instanceof klass;\n                }\n                else {\n                    return false;\n                }\n            },\n            jsValueTypeof(value) {\n                return typeof value;\n            },\n            jsValueEqual(lhs, rhs) {\n                return lhs == rhs;\n            },\n            jsValueStrictlyEqual(lhs, rhs) {\n                return lhs === rhs;\n            },\n            reflectApply: wrapTry((target, thisArgument, args) => {\n                return Reflect.apply(target, thisArgument, args);\n            }),\n            reflectConstruct: function (target, args) {\n                throw new Error(\"Function not implemented.\");\n            },\n            reflectDeleteProperty: function (target, propertyKey) {\n                throw new Error(\"Function not implemented.\");\n            },\n            reflectGet: wrapTry((target, propertyKey) => {\n                return target[propertyKey];\n            }),\n            reflectGetOwnPropertyDescriptor: function (target, propertyKey) {\n                throw new Error(\"Function not implemented.\");\n            },\n            reflectGetPrototypeOf: function (target) {\n                throw new Error(\"Function not implemented.\");\n            },\n            reflectHas: function (target, propertyKey) {\n                throw new Error(\"Function not implemented.\");\n            },\n            reflectIsExtensible: function (target) {\n                throw new Error(\"Function not implemented.\");\n            },\n            reflectOwnKeys: function (target) {\n                throw new Error(\"Function not implemented.\");\n            },\n            reflectPreventExtensions: function (target) {\n                throw new Error(\"Function not implemented.\");\n            },\n            reflectSet: wrapTry((target, propertyKey, value) => {\n                return Reflect.set(target, propertyKey, value);\n            }),\n            reflectSetPrototypeOf: function (target, prototype) {\n                throw new Error(\"Function not implemented.\");\n            },\n        }), (name) => {\n            return this.instance.exports[name];\n        });\n    }\n    /**\n     * Print the Ruby version to stdout\n     */\n    printVersion() {\n        this.guest.rubyShowVersion();\n    }\n    /**\n     * Runs a string of Ruby code from JavaScript\n     * @param code The Ruby code to run\n     * @returns the result of the last expression\n     *\n     * @example\n     * vm.eval(\"puts 'hello world'\");\n     * const result = vm.eval(\"1 + 2\");\n     * console.log(result.toString()); // 3\n     *\n     */\n    eval(code) {\n        return evalRbCode(this, this.privateObject(), code);\n    }\n    /**\n     * Runs a string of Ruby code with top-level `JS::Object#await`\n     * Returns a promise that resolves when execution completes.\n     * @param code The Ruby code to run\n     * @returns a promise that resolves to the result of the last expression\n     *\n     * @example\n     * const text = await vm.evalAsync(`\n     *   require 'js'\n     *   response = JS.global.fetch('https://example.com').await\n     *   response.text.await\n     * `);\n     * console.log(text.toString()); // <html>...</html>\n     */\n    evalAsync(code) {\n        const JS = this.eval(\"require 'js'; JS\");\n        return new Promise((resolve, reject) => {\n            JS.call(\"__eval_async_rb\", this.wrap(code), this.wrap({\n                resolve,\n                reject: (error) => {\n                    reject(new RbError(this.exceptionFormatter.format(error, this, this.privateObject())));\n                },\n            }));\n        });\n    }\n    /**\n     * Wrap a JavaScript value into a Ruby JS::Object\n     * @param value The value to convert to RbValue\n     * @returns the RbValue object representing the given JS value\n     *\n     * @example\n     * const hash = vm.eval(`Hash.new`)\n     * hash.call(\"store\", vm.eval(`\"key1\"`), vm.wrap(new Object()));\n     */\n    wrap(value) {\n        return this.transport.importJsValue(value, this);\n    }\n    privateObject() {\n        return {\n            transport: this.transport,\n            exceptionFormatter: this.exceptionFormatter,\n        };\n    }\n    rbValueOfPointer(pointer) {\n        const abiValue = new RbAbiValue(pointer, this.guest);\n        return new RbValue(abiValue, this, this.privateObject());\n    }\n}\n/**\n * Export a JS value held by the Ruby VM to the JS environment.\n * This is implemented in a dirty way since wit cannot reference resources\n * defined in other interfaces.\n * In our case, we can't express `function(v: rb-abi-value) -> js-abi-value`\n * because `rb-js-abi-host.wit`, that defines `js-abi-value`, is implemented\n * by embedder side (JS) but `rb-abi-guest.wit`, that defines `rb-abi-value`\n * is implemented by guest side (Wasm).\n *\n * This class is a helper to export by:\n * 1. Call `function __export_to_js(v: rb-abi-value)` defined in guest from embedder side.\n * 2. Call `function takeJsValue(v: js-abi-value)` defined in embedder from guest side with\n *    underlying JS value of given `rb-abi-value`.\n * 3. Then `takeJsValue` implementation escapes the given JS value to the `_takenJsValues`\n *    stored in embedder side.\n * 4. Finally, embedder side can take `_takenJsValues`.\n *\n * Note that `exportJsValue` is not reentrant.\n *\n * @private\n */\nclass JsValueTransport {\n    constructor() {\n        this._takenJsValue = null;\n    }\n    takeJsValue(value) {\n        this._takenJsValue = value;\n    }\n    consumeJsValue() {\n        return this._takenJsValue;\n    }\n    exportJsValue(value) {\n        value.call(\"__export_to_js\");\n        return this._takenJsValue;\n    }\n    importJsValue(value, vm) {\n        this._takenJsValue = value;\n        return vm.eval('require \"js\"; JS::Object').call(\"__import_from_js\");\n    }\n}\n/**\n * A RbValue is an object that represents a value in Ruby\n */\nclass RbValue {\n    /**\n     * @hideconstructor\n     */\n    constructor(inner, vm, privateObject) {\n        this.inner = inner;\n        this.vm = vm;\n        this.privateObject = privateObject;\n    }\n    /**\n     * Call a given method with given arguments\n     *\n     * @param callee name of the Ruby method to call\n     * @param args arguments to pass to the method. Must be an array of RbValue\n     *\n     * @example\n     * const ary = vm.eval(\"[1, 2, 3]\");\n     * ary.call(\"push\", 4);\n     * console.log(ary.call(\"sample\").toString());\n     *\n     */\n    call(callee, ...args) {\n        const innerArgs = args.map((arg) => arg.inner);\n        return new RbValue(callRbMethod(this.vm, this.privateObject, this.inner, callee, innerArgs), this.vm, this.privateObject);\n    }\n    /**\n     * @see {@link https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toPrimitive}\n     * @param hint Preferred type of the result primitive value. `\"number\"`, `\"string\"`, or `\"default\"`.\n     */\n    [Symbol.toPrimitive](hint) {\n        if (hint === \"string\" || hint === \"default\") {\n            return this.toString();\n        }\n        else if (hint === \"number\") {\n            return null;\n        }\n        return null;\n    }\n    /**\n     * Returns a string representation of the value by calling `to_s`\n     */\n    toString() {\n        const rbString = callRbMethod(this.vm, this.privateObject, this.inner, \"to_s\", []);\n        return this.vm.guest.rstringPtr(rbString);\n    }\n    /**\n     * Returns a JavaScript object representation of the value\n     * by calling `to_js`.\n     *\n     * Returns null if the value is not convertible to a JavaScript object.\n     */\n    toJS() {\n        const JS = this.vm.eval(\"JS\");\n        const jsValue = JS.call(\"try_convert\", this);\n        if (jsValue.call(\"nil?\").toString() === \"true\") {\n            return null;\n        }\n        return this.privateObject.transport.exportJsValue(jsValue);\n    }\n}\nvar ruby_tag_type;\n(function (ruby_tag_type) {\n    ruby_tag_type[ruby_tag_type[\"None\"] = 0] = \"None\";\n    ruby_tag_type[ruby_tag_type[\"Return\"] = 1] = \"Return\";\n    ruby_tag_type[ruby_tag_type[\"Break\"] = 2] = \"Break\";\n    ruby_tag_type[ruby_tag_type[\"Next\"] = 3] = \"Next\";\n    ruby_tag_type[ruby_tag_type[\"Retry\"] = 4] = \"Retry\";\n    ruby_tag_type[ruby_tag_type[\"Redo\"] = 5] = \"Redo\";\n    ruby_tag_type[ruby_tag_type[\"Raise\"] = 6] = \"Raise\";\n    ruby_tag_type[ruby_tag_type[\"Throw\"] = 7] = \"Throw\";\n    ruby_tag_type[ruby_tag_type[\"Fatal\"] = 8] = \"Fatal\";\n    ruby_tag_type[ruby_tag_type[\"Mask\"] = 15] = \"Mask\";\n})(ruby_tag_type || (ruby_tag_type = {}));\nclass RbExceptionFormatter {\n    constructor() {\n        this.literalsCache = null;\n    }\n    format(error, vm, privateObject) {\n        const [zeroLiteral, oneLiteral, newLineLiteral] = (() => {\n            if (this.literalsCache == null) {\n                const zeroOneNewLine = [\n                    evalRbCode(vm, privateObject, \"0\"),\n                    evalRbCode(vm, privateObject, \"1\"),\n                    evalRbCode(vm, privateObject, `\"\\n\"`),\n                ];\n                this.literalsCache = zeroOneNewLine;\n                return zeroOneNewLine;\n            }\n            else {\n                return this.literalsCache;\n            }\n        })();\n        const backtrace = error.call(\"backtrace\");\n        if (backtrace.call(\"nil?\").toString() === \"true\") {\n            return this.formatString(error.call(\"class\").toString(), error.toString());\n        }\n        const firstLine = backtrace.call(\"at\", zeroLiteral);\n        const restLines = backtrace\n            .call(\"drop\", oneLiteral)\n            .call(\"join\", newLineLiteral);\n        return this.formatString(error.call(\"class\").toString(), error.toString(), [\n            firstLine.toString(),\n            restLines.toString(),\n        ]);\n    }\n    formatString(klass, message, backtrace) {\n        if (backtrace) {\n            return `${backtrace[0]}: ${message} (${klass})\\n${backtrace[1]}`;\n        }\n        else {\n            return `${klass}: ${message}`;\n        }\n    }\n}\nconst checkStatusTag = (rawTag, vm, privateObject) => {\n    switch (rawTag & ruby_tag_type.Mask) {\n        case ruby_tag_type.None:\n            break;\n        case ruby_tag_type.Return:\n            throw new RbError(\"unexpected return\");\n        case ruby_tag_type.Next:\n            throw new RbError(\"unexpected next\");\n        case ruby_tag_type.Break:\n            throw new RbError(\"unexpected break\");\n        case ruby_tag_type.Redo:\n            throw new RbError(\"unexpected redo\");\n        case ruby_tag_type.Retry:\n            throw new RbError(\"retry outside of rescue clause\");\n        case ruby_tag_type.Throw:\n            throw new RbError(\"unexpected throw\");\n        case ruby_tag_type.Raise:\n        case ruby_tag_type.Fatal:\n            const error = new RbValue(vm.guest.rbErrinfo(), vm, privateObject);\n            if (error.call(\"nil?\").toString() === \"true\") {\n                throw new RbError(\"no exception object\");\n            }\n            // clear errinfo if got exception due to no rb_jump_tag\n            vm.guest.rbClearErrinfo();\n            throw new RbError(privateObject.exceptionFormatter.format(error, vm, privateObject));\n        default:\n            throw new RbError(`unknown error tag: ${rawTag}`);\n    }\n};\nfunction wrapRbOperation(vm, body) {\n    try {\n        return body();\n    }\n    catch (e) {\n        if (e instanceof RbError) {\n            throw e;\n        }\n        // All JS exceptions triggered by Ruby code are translated to Ruby exceptions,\n        // so non-RbError exceptions are unexpected.\n        vm.guest.rbVmBugreport();\n        if (e instanceof WebAssembly.RuntimeError && e.message === \"unreachable\") {\n            const error = new RbError(`Something went wrong in Ruby VM: ${e}`);\n            error.stack = e.stack;\n            throw error;\n        }\n        else {\n            throw e;\n        }\n    }\n}\nconst callRbMethod = (vm, privateObject, recv, callee, args) => {\n    const mid = vm.guest.rbIntern(callee + \"\\0\");\n    return wrapRbOperation(vm, () => {\n        const [value, status] = vm.guest.rbFuncallvProtect(recv, mid, args);\n        checkStatusTag(status, vm, privateObject);\n        return value;\n    });\n};\nconst evalRbCode = (vm, privateObject, code) => {\n    return wrapRbOperation(vm, () => {\n        const [value, status] = vm.guest.rbEvalStringProtect(code + \"\\0\");\n        checkStatusTag(status, vm, privateObject);\n        return new RbValue(value, vm, privateObject);\n    });\n};\n/**\n * Error class thrown by Ruby execution\n */\nclass RbError extends Error {\n    /**\n     * @hideconstructor\n     */\n    constructor(message) {\n        super(message);\n    }\n}\n/**\n * Error class thrown by Ruby execution when it is not possible to recover.\n * This is usually caused when Ruby VM is in an inconsistent state.\n */\nclass RbFatalError extends RbError {\n    /**\n     * @hideconstructor\n     */\n    constructor(message) {\n        super(\"Ruby Fatal Error: \" + message);\n    }\n}\n\nexport { RbError, RbFatalError, RbValue, RubyVM };\n","export class KeyEventBuffer {\n  buffer: [number, boolean][];\n  constructor(buffer: [number, boolean][]) {\n    this.buffer = buffer;\n  }\n\n  consume(): [number, boolean] | null {\n    if (this.buffer.length === 0) {\n      return null;\n    }\n    return this.buffer.shift();\n  }\n\n  push(code: number, pressed: boolean) {\n    this.buffer.push([code, pressed]);\n  }\n}\n","import * as Comlink from \"comlink\";\nimport { Directory, File, OpenFile, PreopenDirectory, WASI } from \"@bjorn3/browser_wasi_shim/dist/index\"\nimport { RubyVM } from \"@ruby/wasm-wasi\";\nimport { KeyEventBuffer } from \"./key-event-bus\";\n\nexport type ProgressInput =\n  | {\n    kind: \"progress\";\n    value: number;\n  }\n  | {\n    kind: \"message\";\n    value: string;\n  }\n  | {\n    kind: \"error\";\n    message: string;\n  }\n  | {\n    kind: \"done\";\n  };\n\nexport type Options = {\n  opt: boolean;\n  headless: boolean;\n  rom: string;\n};\n\nexport interface OptcarrotWorkerPort {\n  init(\n    options: Options,\n    render: (image: Uint8Array) => void,\n    playAudio: (audio: Int16Array) => void,\n    progress: (input: ProgressInput) => void\n  ): void;\n  pushKeyEvent(code: number, pressed: boolean): void;\n}\n\nconst OPTCARROT_HEADLESS_DRIVER = `\nmodule Optcarrot\n  # Audio output driver for Web Audio API\n  class WebAudioAudio < Audio\n    def tick(output)\n      JS::eval(\"globalThis.Optcarrot.tickAudio()\")\n    end\n  end\n  # Video output driver for Web Canvas\n  class CanvasVideo < Video\n    def tick(screen)\n      JS::eval(\"globalThis.Optcarrot.tickVideo()\")\n    end\n  end\n  BrowserInput = Input\nend\n`;\n\nconst OPTCARROT_WEB_DRIVER = `\nmodule Optcarrot\n  # Audio output driver for Web Audio API\n  class WebAudioAudio < Audio\n    def tick(output)\n      bin = output.pack(@pack_format)\n      File.binwrite(File.join(\"/OPTCARROT_TMP/audio.data\"), bin)\n      JS::eval(\"globalThis.Optcarrot.tickAudio()\")\n    rescue => e\n      JS.global[:console].warn(e.inspect)\n    end\n  end\n  # Video output driver for Web Canvas\n  class CanvasVideo < Video\n    def init\n      super\n      @palette = @palette_rgb.map do |r, g, b|\n        0xff000000 | (b << 16) | (g << 8) | r\n      end\n    end\n\n    def dispose\n    end\n\n    def tick(screen)\n      bin = screen.pack(\"L*\")\n      File.binwrite(File.join(\"/OPTCARROT_TMP\", File.basename(@conf.video_output, \".EXT\") + \".data\"), bin)\n      JS::eval(\"globalThis.Optcarrot.tickVideo()\")\n      super\n    rescue => e\n      JS.global[:console].warn(e.inspect)\n    end\n  end\n  # Input driver for browser input\n  class BrowserInput < Input\n    def init\n    end\n\n    def dispose\n    end\n\n    def tick(frame, pads)\n      event = JS::eval(\"return globalThis.Optcarrot.fetchKeyEvent()\").inspect\n      return if event == \"\"\n      code, pressed = event.split(\",\")\n      code = code.to_i\n      if pressed == \"true\"\n        pads.keydown(0, code)\n      else\n        pads.keyup(0, code)\n      end\n    end\n  end\nend\n`;\n\nexport class Optcarrot implements OptcarrotWorkerPort {\n  rootFs: { [key: string]: File | Directory } = {};\n  wasi: WASI;\n  vm: RubyVM;\n  keyEventConsumer: KeyEventBuffer;\n\n  tickVideo: () => void;\n  tickAudio: () => void;\n  remoteRender: (image: Uint8Array) => void;\n  remotePlayAudio: (audio: Int16Array) => void;\n\n  constructor() {\n    const rootContents = {}\n    rootContents[\"OPTCARROT_TMP\"] = new Directory({})\n    this.rootFs = rootContents\n\n    const args = [\"ruby.wasm\", \"-e_=0\"];\n    this.wasi = new WASI(args, [], [\n      new OpenFile(new File([])), // stdin\n      new OpenFile(new File([])), // stdout\n      new OpenFile(new File([])), // stderr\n      new PreopenDirectory(\"/\", rootContents)\n    ], {\n      debug: false\n    });\n    this.keyEventConsumer = new KeyEventBuffer([]);\n  }\n\n  computeOptions(options: Options): string[] {\n    const optionsArray: string[] = [];\n    const ROMS = {\n      \"Lan_Master.nes\": \"/optcarrot/examples/Lan_Master.nes\",\n    };\n    if (options.opt) {\n      optionsArray.push(\"--opt\");\n    }\n    if (ROMS[options.rom]) {\n      optionsArray.push(ROMS[options.rom]);\n    } else {\n      throw new Error(`Unknown ROM: ${options.rom}`);\n    }\n    return optionsArray;\n  }\n\n  async init(\n    options: Options,\n    render: (image: Uint8Array) => void,\n    playAudio: (audio: Int16Array) => void,\n    progress: (input: ProgressInput) => void\n  ) {\n    this.remoteRender = render;\n    this.remotePlayAudio = playAudio;\n\n    // Fetch and instantiate WebAssembly binary\n    progress({ kind: \"message\", value: \"Downloading...\" });\n    progress({ kind: \"progress\", value: 0 });\n    const response = await fetch(\"./optcarrot.wasm\");\n    const buffer = await response.arrayBuffer();\n    progress({ kind: \"progress\", value: 0.2 });\n    progress({ kind: \"message\", value: \"Instantiating Optcarrot...\" });\n\n    const imports = {\n      wasi_snapshot_preview1: this.wasi.wasiImport,\n    };\n    const vm = new RubyVM();\n    vm.addToImports(imports);\n\n    // Instantiate the WebAssembly module\n    const { instance } = await WebAssembly.instantiate(buffer, imports);\n    await vm.setInstance(instance);\n    progress({ kind: \"progress\", value: 0.3 });\n\n    // Initialize WASI application\n    this.wasi.initialize(instance as any);\n\n    // Initialize Ruby VM\n    vm.initialize();\n    progress({ kind: \"progress\", value: 0.6 });\n\n    console.time(\"init-optcarrot\");\n    console.log(\"Options:\", options);\n    vm.eval(`\n      require \"js\"\n      JS::eval(\"console.time('require-optcarrot')\")\n      require_relative \"/optcarrot/lib/optcarrot.rb\"\n      JS::eval(\"console.timeEnd('require-optcarrot')\")\n    `);\n    progress({ kind: \"progress\", value: 0.8 });\n\n    this.tickVideo = options.headless\n      ? () => {\n          this.remoteRender(new Uint8Array());\n        }\n      : () => {\n          const bytes = this.videoBytes();\n          this.remoteRender(Comlink.transfer(bytes, [bytes.buffer]));\n        };\n\n    this.tickAudio = options.headless\n      ? () => {\n          this.remotePlayAudio(new Int16Array());\n        }\n      : () => {\n          const bytes = this.audioBytes();\n          this.remotePlayAudio(Comlink.transfer(bytes, [bytes.buffer]));\n        };\n\n    vm.eval(`\n      ${options.headless ? OPTCARROT_HEADLESS_DRIVER : OPTCARROT_WEB_DRIVER}\n\n      # Monkey patch the Optcarrot to use web drivers\n      Optcarrot::Driver.define_singleton_method(:load) do |conf|\n        video = Optcarrot::CanvasVideo.new(conf)\n        audio = Optcarrot::WebAudioAudio.new(conf)\n        input = Optcarrot::BrowserInput.new(conf, video)\n        [video, audio, input]\n      end\n\n      args = [\n          ${this.computeOptions(options)\n            .map((option) => `\"${option}\"`)\n            .join(\", \")},\n          \"--audio-sample-rate=11050\",\n      ]\n      JS::eval(\"console.time('Optcarrot::NES.new')\")\n      $nes = Optcarrot::NES.new(args)\n      JS::eval(\"console.timeEnd('Optcarrot::NES.new')\")\n    `);\n    progress({ kind: \"progress\", value: 1 });\n    progress({ kind: \"done\" });\n    vm.eval(`$nes.reset`);\n    this.vm = vm;\n    this.run();\n  }\n\n  run() {\n    setTimeout(this.run.bind(this), 0);\n    this.vm.eval(`$nes.step`);\n  }\n\n  videoBytes(): Uint8Array {\n    const tmpDir = this.rootFs[\"OPTCARROT_TMP\"] as Directory\n    const data = tmpDir.get_entry_for_path(\"video.data\") as File\n    return data.data\n  }\n\n  audioBytes(): Int16Array {\n    const tmpDir = this.rootFs[\"OPTCARROT_TMP\"] as Directory\n    const data = tmpDir.get_entry_for_path(\"audio.data\") as File\n    return new Int16Array(data.data.buffer)\n  }\n\n  pushKeyEvent(code: number, pressed: boolean): void {\n    this.keyEventConsumer.push(code, pressed);\n  }\n\n  fetchKeyEvent(): string {\n    const event = this.keyEventConsumer.consume();\n    if (!event) return \"\";\n    return event.join(\",\");\n  }\n}\n\nconst main = () => {\n  const optcarrot = new Optcarrot();\n  // @ts-ignore\n  globalThis.Optcarrot = optcarrot;\n\n  Comlink.expose({\n    init(\n      options: Options,\n      render: (image: Uint8Array) => void,\n      playAudio: (audio: Int16Array) => void,\n      progress: (input: ProgressInput) => void\n    ): void {\n      try {\n        optcarrot.init(options, render, playAudio, progress).catch((e) => {\n          progress({\n            kind: \"error\",\n            message: \"Failed to initialize Optcarrot: \" + e.message,\n          });\n        });\n      } catch (e) {\n        progress({\n          kind: \"error\",\n          message: \"Failed to initialize Optcarrot: \" + e.message,\n        });\n      }\n    },\n    pushKeyEvent(code: number, pressed: boolean): void {\n      optcarrot.pushKeyEvent(code, pressed);\n    },\n  });\n};\n\nif (\n  // @ts-ignore\n  typeof WorkerGlobalScope !== \"undefined\" &&\n  // @ts-ignore\n  self instanceof WorkerGlobalScope\n) {\n  main();\n}\n","import*as wasi from\"./wasi_defs.js\";import{debug}from\"./debug.js\";let WASI=class WASI{start(instance){this.inst=instance;instance.exports._start()}initialize(instance){this.inst=instance;instance.exports._initialize()}constructor(args,env,fds,options={}){this.args=[];this.env=[];this.fds=[];debug.enable(options.debug);this.args=args;this.env=env;this.fds=fds;const self=this;this.wasiImport={args_sizes_get(argc,argv_buf_size){const buffer=new DataView(self.inst.exports.memory.buffer);buffer.setUint32(argc,self.args.length,true);let buf_size=0;for(const arg of self.args){buf_size+=arg.length+1}buffer.setUint32(argv_buf_size,buf_size,true);debug.log(buffer.getUint32(argc,true),buffer.getUint32(argv_buf_size,true));return 0},args_get(argv,argv_buf){const buffer=new DataView(self.inst.exports.memory.buffer);const buffer8=new Uint8Array(self.inst.exports.memory.buffer);const orig_argv_buf=argv_buf;for(let i=0;i<self.args.length;i++){buffer.setUint32(argv,argv_buf,true);argv+=4;const arg=new TextEncoder().encode(self.args[i]);buffer8.set(arg,argv_buf);buffer.setUint8(argv_buf+arg.length,0);argv_buf+=arg.length+1}if(debug.enabled){debug.log(new TextDecoder(\"utf-8\").decode(buffer8.slice(orig_argv_buf,argv_buf)))}return 0},environ_sizes_get(environ_count,environ_size){const buffer=new DataView(self.inst.exports.memory.buffer);buffer.setUint32(environ_count,self.env.length,true);let buf_size=0;for(const environ of self.env){buf_size+=environ.length+1}buffer.setUint32(environ_size,buf_size,true);debug.log(buffer.getUint32(environ_count,true),buffer.getUint32(environ_size,true));return 0},environ_get(environ,environ_buf){const buffer=new DataView(self.inst.exports.memory.buffer);const buffer8=new Uint8Array(self.inst.exports.memory.buffer);const orig_environ_buf=environ_buf;for(let i=0;i<self.env.length;i++){buffer.setUint32(environ,environ_buf,true);environ+=4;const e=new TextEncoder().encode(self.env[i]);buffer8.set(e,environ_buf);buffer.setUint8(environ_buf+e.length,0);environ_buf+=e.length+1}if(debug.enabled){debug.log(new TextDecoder(\"utf-8\").decode(buffer8.slice(orig_environ_buf,environ_buf)))}return 0},clock_res_get(id,res_ptr){throw\"unimplemented\"},clock_time_get(id,precision,time){const buffer=new DataView(self.inst.exports.memory.buffer);if(id===wasi.CLOCKID_REALTIME){buffer.setBigUint64(time,BigInt(new Date().getTime())*1000000n,true)}else if(id==wasi.CLOCKID_MONOTONIC){let monotonic_time;try{monotonic_time=BigInt(Math.round(performance.now()*1e6))}catch(e){monotonic_time=0n}buffer.setBigUint64(time,monotonic_time,true)}else{buffer.setBigUint64(time,0n,true)}return 0},fd_advise(fd,offset,len,advice){if(self.fds[fd]!=undefined){return self.fds[fd].fd_advise(offset,len,advice)}else{return wasi.ERRNO_BADF}},fd_allocate(fd,offset,len){if(self.fds[fd]!=undefined){return self.fds[fd].fd_allocate(offset,len)}else{return wasi.ERRNO_BADF}},fd_close(fd){if(self.fds[fd]!=undefined){const ret=self.fds[fd].fd_close();self.fds[fd]=undefined;return ret}else{return wasi.ERRNO_BADF}},fd_datasync(fd){if(self.fds[fd]!=undefined){return self.fds[fd].fd_datasync()}else{return wasi.ERRNO_BADF}},fd_fdstat_get(fd,fdstat_ptr){if(self.fds[fd]!=undefined){const{ret,fdstat}=self.fds[fd].fd_fdstat_get();if(fdstat!=null){fdstat.write_bytes(new DataView(self.inst.exports.memory.buffer),fdstat_ptr)}return ret}else{return wasi.ERRNO_BADF}},fd_fdstat_set_flags(fd,flags){if(self.fds[fd]!=undefined){return self.fds[fd].fd_fdstat_set_flags(flags)}else{return wasi.ERRNO_BADF}},fd_fdstat_set_rights(fd,fs_rights_base,fs_rights_inheriting){if(self.fds[fd]!=undefined){return self.fds[fd].fd_fdstat_set_rights(fs_rights_base,fs_rights_inheriting)}else{return wasi.ERRNO_BADF}},fd_filestat_get(fd,filestat_ptr){if(self.fds[fd]!=undefined){const{ret,filestat}=self.fds[fd].fd_filestat_get();if(filestat!=null){filestat.write_bytes(new DataView(self.inst.exports.memory.buffer),filestat_ptr)}return ret}else{return wasi.ERRNO_BADF}},fd_filestat_set_size(fd,size){if(self.fds[fd]!=undefined){return self.fds[fd].fd_filestat_set_size(size)}else{return wasi.ERRNO_BADF}},fd_filestat_set_times(fd,atim,mtim,fst_flags){if(self.fds[fd]!=undefined){return self.fds[fd].fd_filestat_set_times(atim,mtim,fst_flags)}else{return wasi.ERRNO_BADF}},fd_pread(fd,iovs_ptr,iovs_len,offset,nread_ptr){const buffer=new DataView(self.inst.exports.memory.buffer);const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const iovecs=wasi.Iovec.read_bytes_array(buffer,iovs_ptr,iovs_len);const{ret,nread}=self.fds[fd].fd_pread(buffer8,iovecs,offset);buffer.setUint32(nread_ptr,nread,true);return ret}else{return wasi.ERRNO_BADF}},fd_prestat_get(fd,buf_ptr){const buffer=new DataView(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const{ret,prestat}=self.fds[fd].fd_prestat_get();if(prestat!=null){prestat.write_bytes(buffer,buf_ptr)}return ret}else{return wasi.ERRNO_BADF}},fd_prestat_dir_name(fd,path_ptr,path_len){if(self.fds[fd]!=undefined){const{ret,prestat_dir_name}=self.fds[fd].fd_prestat_dir_name();if(prestat_dir_name!=null){const buffer8=new Uint8Array(self.inst.exports.memory.buffer);buffer8.set(prestat_dir_name,path_ptr)}return ret}else{return wasi.ERRNO_BADF}},fd_pwrite(fd,iovs_ptr,iovs_len,offset,nwritten_ptr){const buffer=new DataView(self.inst.exports.memory.buffer);const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const iovecs=wasi.Ciovec.read_bytes_array(buffer,iovs_ptr,iovs_len);const{ret,nwritten}=self.fds[fd].fd_pwrite(buffer8,iovecs,offset);buffer.setUint32(nwritten_ptr,nwritten,true);return ret}else{return wasi.ERRNO_BADF}},fd_read(fd,iovs_ptr,iovs_len,nread_ptr){const buffer=new DataView(self.inst.exports.memory.buffer);const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const iovecs=wasi.Iovec.read_bytes_array(buffer,iovs_ptr,iovs_len);const{ret,nread}=self.fds[fd].fd_read(buffer8,iovecs);buffer.setUint32(nread_ptr,nread,true);return ret}else{return wasi.ERRNO_BADF}},fd_readdir(fd,buf,buf_len,cookie,bufused_ptr){const buffer=new DataView(self.inst.exports.memory.buffer);const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){let bufused=0;while(true){const{ret,dirent}=self.fds[fd].fd_readdir_single(cookie);if(ret!=0){buffer.setUint32(bufused_ptr,bufused,true);return ret}if(dirent==null){break}if(buf_len-bufused<dirent.head_length()){bufused=buf_len;break}const head_bytes=new ArrayBuffer(dirent.head_length());dirent.write_head_bytes(new DataView(head_bytes),0);buffer8.set(new Uint8Array(head_bytes).slice(0,Math.min(head_bytes.byteLength,buf_len-bufused)),buf);buf+=dirent.head_length();bufused+=dirent.head_length();if(buf_len-bufused<dirent.name_length()){bufused=buf_len;break}dirent.write_name_bytes(buffer8,buf,buf_len-bufused);buf+=dirent.name_length();bufused+=dirent.name_length();cookie=dirent.d_next}buffer.setUint32(bufused_ptr,bufused,true);return 0}else{return wasi.ERRNO_BADF}},fd_renumber(fd,to){if(self.fds[fd]!=undefined&&self.fds[to]!=undefined){const ret=self.fds[to].fd_close();if(ret!=0){return ret}self.fds[to]=self.fds[fd];self.fds[fd]=undefined;return 0}else{return wasi.ERRNO_BADF}},fd_seek(fd,offset,whence,offset_out_ptr){const buffer=new DataView(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const{ret,offset:offset_out}=self.fds[fd].fd_seek(offset,whence);buffer.setBigInt64(offset_out_ptr,offset_out,true);return ret}else{return wasi.ERRNO_BADF}},fd_sync(fd){if(self.fds[fd]!=undefined){return self.fds[fd].fd_sync()}else{return wasi.ERRNO_BADF}},fd_tell(fd,offset_ptr){const buffer=new DataView(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const{ret,offset}=self.fds[fd].fd_tell();buffer.setBigUint64(offset_ptr,offset,true);return ret}else{return wasi.ERRNO_BADF}},fd_write(fd,iovs_ptr,iovs_len,nwritten_ptr){const buffer=new DataView(self.inst.exports.memory.buffer);const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const iovecs=wasi.Ciovec.read_bytes_array(buffer,iovs_ptr,iovs_len);const{ret,nwritten}=self.fds[fd].fd_write(buffer8,iovecs);buffer.setUint32(nwritten_ptr,nwritten,true);return ret}else{return wasi.ERRNO_BADF}},path_create_directory(fd,path_ptr,path_len){const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const path=new TextDecoder(\"utf-8\").decode(buffer8.slice(path_ptr,path_ptr+path_len));return self.fds[fd].path_create_directory(path)}},path_filestat_get(fd,flags,path_ptr,path_len,filestat_ptr){const buffer=new DataView(self.inst.exports.memory.buffer);const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const path=new TextDecoder(\"utf-8\").decode(buffer8.slice(path_ptr,path_ptr+path_len));const{ret,filestat}=self.fds[fd].path_filestat_get(flags,path);if(filestat!=null){filestat.write_bytes(buffer,filestat_ptr)}return ret}else{return wasi.ERRNO_BADF}},path_filestat_set_times(fd,flags,path_ptr,path_len,atim,mtim,fst_flags){const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const path=new TextDecoder(\"utf-8\").decode(buffer8.slice(path_ptr,path_ptr+path_len));return self.fds[fd].path_filestat_set_times(flags,path,atim,mtim,fst_flags)}else{return wasi.ERRNO_BADF}},path_link(old_fd,old_flags,old_path_ptr,old_path_len,new_fd,new_path_ptr,new_path_len){const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[old_fd]!=undefined&&self.fds[new_fd]!=undefined){const old_path=new TextDecoder(\"utf-8\").decode(buffer8.slice(old_path_ptr,old_path_ptr+old_path_len));const new_path=new TextDecoder(\"utf-8\").decode(buffer8.slice(new_path_ptr,new_path_ptr+new_path_len));return self.fds[new_fd].path_link(old_fd,old_flags,old_path,new_path)}else{return wasi.ERRNO_BADF}},path_open(fd,dirflags,path_ptr,path_len,oflags,fs_rights_base,fs_rights_inheriting,fd_flags,opened_fd_ptr){const buffer=new DataView(self.inst.exports.memory.buffer);const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const path=new TextDecoder(\"utf-8\").decode(buffer8.slice(path_ptr,path_ptr+path_len));debug.log(path);const{ret,fd_obj}=self.fds[fd].path_open(dirflags,path,oflags,fs_rights_base,fs_rights_inheriting,fd_flags);if(ret!=0){return ret}self.fds.push(fd_obj);const opened_fd=self.fds.length-1;buffer.setUint32(opened_fd_ptr,opened_fd,true);return 0}else{return wasi.ERRNO_BADF}},path_readlink(fd,path_ptr,path_len,buf_ptr,buf_len,nread_ptr){const buffer=new DataView(self.inst.exports.memory.buffer);const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const path=new TextDecoder(\"utf-8\").decode(buffer8.slice(path_ptr,path_ptr+path_len));debug.log(path);const{ret,data}=self.fds[fd].path_readlink(path);if(data!=null){if(data.length>buf_len){buffer.setUint32(nread_ptr,0,true);return wasi.ERRNO_BADF}buffer8.set(data,buf_ptr);buffer.setUint32(nread_ptr,data.length,true)}return ret}else{return wasi.ERRNO_BADF}},path_remove_directory(fd,path_ptr,path_len){const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const path=new TextDecoder(\"utf-8\").decode(buffer8.slice(path_ptr,path_ptr+path_len));return self.fds[fd].path_remove_directory(path)}else{return wasi.ERRNO_BADF}},path_rename(fd,old_path_ptr,old_path_len,new_fd,new_path_ptr,new_path_len){throw\"FIXME what is the best abstraction for this?\"},path_symlink(old_path_ptr,old_path_len,fd,new_path_ptr,new_path_len){const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const old_path=new TextDecoder(\"utf-8\").decode(buffer8.slice(old_path_ptr,old_path_ptr+old_path_len));const new_path=new TextDecoder(\"utf-8\").decode(buffer8.slice(new_path_ptr,new_path_ptr+new_path_len));return self.fds[fd].path_symlink(old_path,new_path)}else{return wasi.ERRNO_BADF}},path_unlink_file(fd,path_ptr,path_len){const buffer8=new Uint8Array(self.inst.exports.memory.buffer);if(self.fds[fd]!=undefined){const path=new TextDecoder(\"utf-8\").decode(buffer8.slice(path_ptr,path_ptr+path_len));return self.fds[fd].path_unlink_file(path)}else{return wasi.ERRNO_BADF}},poll_oneoff(in_,out,nsubscriptions){throw\"async io not supported\"},proc_exit(exit_code){throw\"exit with exit code \"+exit_code},proc_raise(sig){throw\"raised signal \"+sig},sched_yield(){},random_get(buf,buf_len){const buffer8=new Uint8Array(self.inst.exports.memory.buffer);for(let i=0;i<buf_len;i++){buffer8[buf+i]=Math.random()*256|0}},sock_recv(fd,ri_data,ri_flags){throw\"sockets not supported\"},sock_send(fd,si_data,si_flags){throw\"sockets not supported\"},sock_shutdown(fd,how){throw\"sockets not supported\"},sock_accept(fd,flags){throw\"sockets not supported\"}}}};export{WASI as default};","import * as Comlink from \"comlink\";\nimport { Optcarrot, OptcarrotWorkerPort, Options } from \"./optcarrot.worker\";\nimport { UAParser } from \"ua-parser-js\"\n\nclass NESView {\n  canvasContext: CanvasRenderingContext2D;\n  scalingCanvas: HTMLCanvasElement;\n  scalingContext: CanvasRenderingContext2D;\n\n  constructor(canvas: HTMLCanvasElement) {\n    this.canvasContext = canvas.getContext(\"2d\");\n    this.scalingCanvas = document.createElement(\"canvas\") as HTMLCanvasElement;\n    this.scalingCanvas.width = canvas.width;\n    this.scalingCanvas.height = canvas.height;\n    this.scalingContext = this.scalingCanvas.getContext(\"2d\");\n    this.canvasContext.scale(2, 2);\n  }\n\n  draw(bytes: Uint8Array) {\n    const rgba = new Uint8ClampedArray(bytes.buffer);\n    const image = new ImageData(rgba, 256, 240);\n    this.scalingContext.putImageData(image, 0, 0);\n    this.canvasContext.drawImage(this.scalingCanvas, 0, 0);\n  }\n}\n\nclass NESAudio {\n  context: AudioContext;\n  scheduledTime: number;\n\n  constructor() {\n    this.context = new AudioContext({ sampleRate: 11050 });\n    this.scheduledTime = 0;\n  }\n\n  push(input: Int16Array) {\n    const buffer = this.context.createBuffer(\n      1,\n      input.length,\n      this.context.sampleRate\n    );\n    const bufferSrc = this.context.createBufferSource();\n    const bufferData = buffer.getChannelData(0);\n    const currentTime = this.context.currentTime;\n    for (let i = 0; i < input.length; i++) {\n      bufferData[i] = input[i] / (2 << 15);\n    }\n    bufferSrc.buffer = buffer;\n    bufferSrc.connect(this.context.destination);\n    if (currentTime < this.scheduledTime) {\n      bufferSrc.start(this.scheduledTime);\n      this.scheduledTime += buffer.duration;\n    } else {\n      console.warn(\n        \"Audio buffer underrun :(\",\n        this.scheduledTime - currentTime\n      );\n      bufferSrc.start(currentTime);\n      this.scheduledTime = currentTime + buffer.duration;\n    }\n  }\n}\n\nclass FpsCounter {\n  times: number[];\n  constructor() {\n    this.times = [];\n  }\n  tick(): number {\n    const now = performance.now();\n    while (this.times.length > 0 && this.times[0] <= now - 1000) {\n      this.times.shift();\n    }\n    this.times.push(now);\n    return this.times.length;\n  }\n}\n\nclass LoadProgress {\n  progress: HTMLProgressElement;\n  message: HTMLElement;\n  constructor(progress: HTMLProgressElement, message: HTMLElement) {\n    this.progress = progress;\n    this.progress.max = 1;\n    this.message = message;\n  }\n\n  log(message: string) {\n    this.message.innerText = message;\n  }\n\n  error(message: string) {\n    this.message.innerText = message;\n    this.progress.hidden = true;\n  }\n\n  setProgress(value: number) {\n    this.progress.value = value;\n  }\n\n  hide() {\n    this.progress.hidden = true;\n    this.message.hidden = true;\n  }\n}\n\nconst padCodeFromCode = (code: string) => {\n  switch (code) {\n    case \"KeyZ\":\n      return 0x0; // A\n    case \"KeyX\":\n      return 0x1; // B\n    case \"Enter\":\n      return 0x2; // select\n    case \"Space\":\n      return 0x3; // start\n    case \"ArrowUp\":\n      return 0x04;\n    case \"ArrowDown\":\n      return 0x05;\n    case \"ArrowLeft\":\n      return 0x06;\n    case \"ArrowRight\":\n      return 0x07;\n    default:\n      return null;\n  }\n};\n\nconst deriveOptions: (url: URL) => Options = (url) => {\n  const enableOptRaw = url.searchParams.get(\"opt\");\n  const headlessRaw = url.searchParams.get(\"headless\");\n  const romRaw = url.searchParams.get(\"rom\");\n  return {\n    opt: enableOptRaw === null ? true : enableOptRaw === \"true\",\n    headless: headlessRaw === null ? false : headlessRaw === \"true\",\n    rom: romRaw === null ? \"Lan_Master.nes\" : romRaw,\n  };\n};\n\nconst play = async (\n  optcarrot: OptcarrotWorkerPort,\n  url: URL,\n  progress: LoadProgress\n) => {\n  const nesView = new NESView(\n    document.getElementById(\"nes-video\") as HTMLCanvasElement\n  );\n  let nesAudio = null;\n\n  progress.log(\"Initializing Optcarrot...\");\n\n  const fps = new FpsCounter();\n  const fpsIndicator = document.getElementById(\"fps-indicator\");\n  const isAudioEnabledCheckbox = document.getElementById(\n    \"audio-enabled\"\n  ) as HTMLInputElement;\n  let audioEnabled = isAudioEnabledCheckbox.checked;\n\n  isAudioEnabledCheckbox.onclick = () => {\n    audioEnabled = isAudioEnabledCheckbox.checked;\n  };\n  document.addEventListener(\"keydown\", (event) => {\n    const code = padCodeFromCode(event.code);\n    if (code !== null) {\n      event.preventDefault();\n      optcarrot.pushKeyEvent(code, true);\n    }\n  });\n\n  document.addEventListener(\"keyup\", (event) => {\n    const code = padCodeFromCode(event.code);\n    if (code !== null) {\n      optcarrot.pushKeyEvent(code, false);\n    }\n  });\n\n  const options = deriveOptions(url);\n  const render: (bytes: Uint8Array) => void = options.headless\n    ? (_) => {\n        fpsIndicator.innerText = fps.tick().toString();\n      }\n    : (bytes) => {\n        nesView.draw(bytes);\n        fpsIndicator.innerText = fps.tick().toString();\n      };\n\n  optcarrot.init(\n    options,\n    // render\n    Comlink.proxy(render),\n    // playAudio\n    Comlink.proxy((bytes) => {\n      if (!audioEnabled) return;\n      if (nesAudio === null) {\n        nesAudio = new NESAudio();\n      }\n      nesAudio.push(bytes);\n    }),\n    Comlink.proxy((input) => {\n      switch (input.kind) {\n        case \"error\": {\n          progress.error(input.message);\n          break;\n        }\n        case \"message\": {\n          progress.log(input.value);\n          break;\n        }\n        case \"done\": {\n          progress.hide();\n          break;\n        }\n        case \"progress\": {\n          progress.setProgress(input.value);\n          break;\n        }\n      }\n    })\n  );\n};\n\nconst progress = new LoadProgress(\n  document.getElementById(\"loading-progress\") as HTMLProgressElement,\n  document.getElementById(\"loading-message\")\n);\n\nconst optcarrot = (() => {\n  const ua = UAParser(navigator.userAgent);\n  if (ua.os.name === \"iOS\") {\n    progress.error(\"Optcarrot is not supported on iOS due to WebKit stack size limitation.\");\n    return;\n  }\n  if (ua.browser.name === \"Safari\") {\n    const optcarrot = new Optcarrot();\n    return optcarrot; \n  }\n  return Comlink.wrap<OptcarrotWorkerPort>(\n    // @ts-ignore\n    new Worker(new URL(\"optcarrot.worker.ts\", import.meta.url), {\n      type: \"module\",\n    })\n  );\n})();\nglobalThis.Optcarrot = optcarrot;\nplay(optcarrot, new URL(window.location.href), progress);\n","\"use strict\";\n\nmodule.exports = function (workerUrl, origin, isESM) {\n  if (origin === self.location.origin) {\n    // If the worker bundle's url is on the same origin as the document,\n    // use the worker bundle's own url.\n    return workerUrl;\n  } else {\n    // Otherwise, create a blob URL which loads the worker bundle with `importScripts`.\n    var source = isESM ? 'import ' + JSON.stringify(workerUrl) + ';' : 'importScripts(' + JSON.stringify(workerUrl) + ');';\n    return URL.createObjectURL(new Blob([source], {\n      type: 'application/javascript'\n    }));\n  }\n};","let workerURL = require('./helpers/get-worker-url');\nlet url = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3YKzz\"));\nmodule.exports = workerURL(url.toString(), url.origin, true);"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","window","undefined","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MODEL","NAME","TYPE","VENDOR","VERSION","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","AMAZON","APPLE","ASUS","BLACKBERRY","FIREFOX","GOOGLE","HUAWEI","LG","MICROSOFT","MOTOROLA","OPERA","SAMSUNG","SONY","XIAOMI","ZEBRA","FACEBOOK","enumerize","arr","enums","toUpperCase","has","str1","str2","lowerize","indexOf","str","toLowerCase","trim","len","replace","substring","rgxMapper","ua","arrays","j","k","p","q","matches","match","regex","props","exec","this","call","test","strMapper","map","windowsVersionMap","ME","XP","Vista","RT","regexes1","browser","CHROME","cpu","device","engine","EDGE","os","UAParser","ua1","extensions","getResult","_ua","navigator","userAgent","_rgxmap","regexes","mergedRegexes","concat","extend","getBrowser","version","_browser","major","split","getCPU","_cpu","getDevice","_device","getEngine","_engine","getOS","_os","getUA","setUA","BROWSER","CPU","DEVICE","ENGINE","OS","exports","module","define","amd","$","jQuery","Zepto","parser","get","set","result","prop","parcelRequire","register","JSON","parse","$0e112480d1414235$export$be5234c0b764b6e0","Symbol","val","$0e112480d1414235$export$ab8f1c00731ee83e","Map","$0e112480d1414235$var$isObject","serialize","obj","port1","port2","MessageChannel","port","value","$0e112480d1414235$var$throwMarker","serialized","isError","message","name","stack","assign","obj1","ep","self","callback","ev","data","type","path","argumentList","$0e112480d1414235$var$fromWireValue","slice","reduce","rawValue","returnValue1","apply","parent","$0e112480d1414235$export$9b7f6e342a8cbd38","$0e112480d1414235$export$c9b234447cf4ef7c","value1","Promise","resolve","catch","then","returnValue","wireValue","transferables","$0e112480d1414235$var$toWireValue","postMessage","removeEventListener","$0e112480d1414235$var$closeEndPoint","start","endpoint","constructor","close","target","isReleased","Proxy","isProxyReleased","$0e112480d1414235$var$requestResponseMessage","toString","r","bind","_target","$0e112480d1414235$var$throwIfProxyReleased","_thisArg","rawArgumentList","last","$0e112480d1414235$export$39fb953702b7fcd7","$0e112480d1414235$var$createProxy","$0e112480d1414235$var$processArguments","construct","$0e112480d1414235$export$923f96dd5afa9ce6","processed","v","Array","prototype","$0e112480d1414235$var$transferCache","WeakMap","transfers","handler","canHandle","serializedValue","deserialize","msg","$3d6785fc5ff0cf24$export$a6d8551163b25e7d","view","ptr","iovec","buf","getUint32","buf_len","iovecs","push","read_bytes","$3d6785fc5ff0cf24$export$9433c4a0191b4507","$3d6785fc5ff0cf24$export$c7179ef11cae3382","head_length","name_length","dir_name","byteLength","write_head_bytes","setBigUint64","d_next","d_ino","setUint32","setUint8","d_type","write_name_bytes","view8","Math","min","next_cookie","encoded_name","TextEncoder","encode","d_namlen","$3d6785fc5ff0cf24$export$548d19b2b1235676","write_bytes","fs_filetype","setUint16","fs_flags","fs_rights_base","fs_rights_inherited","filetype","flags","$3d6785fc5ff0cf24$export$5ccc6d59695a08","dev","ino","nlink","size","atim","mtim","ctim","$3d6785fc5ff0cf24$export$9a84b57910e83b78","pr_name_len","name_len","$3d6785fc5ff0cf24$export$8b650493b9c7ba11","prestat","tag","inner","$616c0e5e4b40f400$export$1c9f709888824e05","enable","enabled","log","prefix","console","$616c0e5e4b40f400$var$createLogger","isEnabled","$b34794528eb7fa08$export$c0a50da58385506f","fd_advise","offset","advice","fd_allocate","fd_close","fd_datasync","fd_fdstat_get","ret","fdstat","fd_fdstat_set_flags","fd_fdstat_set_rights","fs_rights_inheriting","fd_filestat_get","filestat","fd_filestat_set_size","fd_filestat_set_times","fst_flags","fd_pread","iovs","nread","fd_prestat_get","fd_prestat_dir_name","prestat_dir_name","fd_pwrite","nwritten","fd_read","fd_readdir_single","cookie","dirent","fd_seek","whence","fd_sync","fd_tell","fd_write","path_create_directory","path_filestat_get","path_filestat_set_times","path_link","old_fd","old_flags","old_path","new_path","path_open","dirflags","oflags","fdflags","fd_obj","path_readlink","path_remove_directory","path_rename","new_fd","path_symlink","path_unlink_file","$6250f32793039bcf$export$f0382002eea5fa78","file_pos","file","Number","BigInt","calculated_offset","readonly","buffer","old","Uint8Array","stat","super","$6250f32793039bcf$export$3bdf71105e7d4134","dir","contents","entry","get_entry_for_path","fd_flags","create_entry_for_path","$43cf97130e1ffa1b$export$1dbf9926a0d54d98","truncate","open","$3d6785fc5ff0cf24$export$3f80d5ae3d18e936","$6250f32793039bcf$export$db40f346fa6c0ce9","prestat_name","$43cf97130e1ffa1b$export$b6afa8811b7e644e","options","component","is_dir","components","filter","ArrayBuffer","$bd81f82b3d43bf4c$var$DATA_VIEW","DataView","$bd81f82b3d43bf4c$var$data_view","mem","$bd81f82b3d43bf4c$var$UTF8_DECODER","TextDecoder","$bd81f82b3d43bf4c$var$UTF8_ENCODER","$bd81f82b3d43bf4c$var$utf8_encode","s","realloc","memory","TypeError","$bd81f82b3d43bf4c$var$UTF8_ENCODED_LEN","alloc_len","writtenTotal","read","written","encodeInto","$bd81f82b3d43bf4c$var$Slab","list","head","insert","next","slot","idx","RangeError","remove","$bd81f82b3d43bf4c$var$throw_invalid_bool","$bd81f82b3d43bf4c$var$RbAbiGuest","_resource0_slab","_resource1_slab","addToImports","imports","canonical_abi","drop","clone","_wasm_val","_registry0","$bd81f82b3d43bf4c$var$RbIseq","_registry1","$bd81f82b3d43bf4c$var$RbAbiValue","WebAssembly","Instance","instance","Module","instantiate","instantiateStreaming","_exports","FinalizationRegistry","rubyShowVersion","rubyInit","rubySysinit","arg0","vec1","len1","result1","base","ptr0","len0","setInt32","rubyOptions","rubyScript","rubyInitLoadpath","rbEvalStringProtect","getInt32","rbFuncallvProtect","arg1","arg2","obj0","vec2","len2","result2","rbIntern","rbErrinfo","rbClearErrinfo","rstringPtr","ptr1","decode","rbVmBugreport","rbGcEnable","rbGcDisable","rbSetShouldProhibitRewind","wasm_val","_obj","_refcnt","unregister","dtor","$bd81f82b3d43bf4c$export$d919f437fe5c5cf3","interfaceState","hasJSFrameAfterRbFrame","guest","excluded","key","getOwnPropertyNames","includes","args","oldShouldProhibitRewind","oldIsDisabledGc","Reflect","proxyExports","transport","$bd81f82b3d43bf4c$var$JsValueTransport","exceptionFormatter","$bd81f82b3d43bf4c$var$RbExceptionFormatter","initialize","c_args","arg","async","imports1","wrapTry","f","e","$bd81f82b3d43bf4c$export$4cfdd59320ca32d1","rb_wasm_throw_prohibit_rewind_exception","messagePtr","messageLen","get_export","result0","variant1","evalJs","setInt8","resources0","isJs","instanceOf","ret0","globalThis","intToJsNumber","floatToJsNumber","stringToJsString","bool0","boolToJsBool","procToJsFunction","rbObjectToJsRbValue","jsValueToString","jsValueToInteger","setFloat64","exportJsValueToHost","importJsValueFromHost","jsValueTypeof","jsValueEqual","jsValueStrictlyEqual","arg3","arg4","base0","reflectApply","reflectConstruct","reflectDeleteProperty","reflectGet","reflectGetOwnPropertyDescriptor","reflectGetPrototypeOf","reflectHas","reflectIsExtensible","vec0","reflectOwnKeys","reflectPreventExtensions","reflectSet","reflectSetPrototypeOf","dropJsAbiValue","$bd81f82b3d43bf4c$var$addRbJsAbiHostToImports","entries","oldValue","proxyImports","code","Function","$parcel$global","rawRbAbiValue","rbValue","rbValueOfPointer","wrap","String","takeJsValue","consumeJsValue","klass","lhs","rhs","thisArgument","propertyKey","printVersion","eval","$bd81f82b3d43bf4c$var$evalRbCode","privateObject","evalAsync","JS","reject","error","$bd81f82b3d43bf4c$export$a25cc2e29c199159","format","importJsValue","pointer","abiValue","$bd81f82b3d43bf4c$export$3a79e18eccff138a","_takenJsValue","exportJsValue","vm","callee","innerArgs","$bd81f82b3d43bf4c$var$callRbMethod","toPrimitive","hint","rbString","toJS","jsValue","$bd81f82b3d43bf4c$var$ruby_tag_type","ruby_tag_type","literalsCache","zeroLiteral","oneLiteral","newLineLiteral","zeroOneNewLine","backtrace","formatString","firstLine","restLines","$bd81f82b3d43bf4c$var$checkStatusTag","rawTag","Mask","None","Return","Next","Break","Redo","Retry","Throw","Raise","Fatal","$bd81f82b3d43bf4c$var$wrapRbOperation","body","RuntimeError","recv","mid","status","$ca3da48d962b5339$export$2706b0bc26786311","consume","shift","pressed","$99e656c0ca04a17b$export$f5a5987519ea0f4d","rootFs","rootContents","wasi","inst","_start","_initialize","env","fds","debug","wasiImport","args_sizes_get","argc","argv_buf_size","buf_size","args_get","argv","argv_buf","buffer8","orig_argv_buf","environ_sizes_get","environ_count","environ_size","environ","environ_get","environ_buf","orig_environ_buf","clock_res_get","res_ptr","clock_time_get","precision","time","Date","getTime","monotonic_time","round","performance","now","fd","fdstat_ptr","filestat_ptr","iovs_ptr","iovs_len","nread_ptr","read_bytes_array","buf_ptr","path_ptr","path_len","nwritten_ptr","fd_readdir","bufused_ptr","bufused","head_bytes","fd_renumber","to","offset_out_ptr","offset_out","setBigInt64","offset_ptr","old_path_ptr","old_path_len","new_path_ptr","new_path_len","opened_fd_ptr","opened_fd","poll_oneoff","in_","out","nsubscriptions","proc_exit","exit_code","proc_raise","sig","sched_yield","random_get","random","sock_recv","ri_data","ri_flags","sock_send","si_data","si_flags","sock_shutdown","how","sock_accept","keyEventConsumer","computeOptions","optionsArray","ROMS","opt","rom","render","playAudio","progress","remoteRender","remotePlayAudio","kind","response","fetch","arrayBuffer","wasi_snapshot_preview1","setInstance","tickVideo","headless","bytes","videoBytes","tickAudio","Int16Array","audioBytes","option","join","run","setTimeout","pushKeyEvent","fetchKeyEvent","event","WorkerGlobalScope","optcarrot","Optcarrot","init","$99e656c0ca04a17b$var$main","$b4e14b6b8da86996$var$NESView","canvas","canvasContext","getContext","scalingCanvas","document","createElement","width","height","scalingContext","scale","draw","rgba","Uint8ClampedArray","image","ImageData","putImageData","drawImage","$b4e14b6b8da86996$var$NESAudio","context","AudioContext","sampleRate","scheduledTime","input","createBuffer","bufferSrc","createBufferSource","bufferData","getChannelData","currentTime","connect","destination","duration","warn","$b4e14b6b8da86996$var$FpsCounter","times","tick","$b4e14b6b8da86996$var$padCodeFromCode","$b4e14b6b8da86996$var$progress","max","innerText","hidden","setProgress","hide","getElementById","$56b621a6dd25b2cb$exports","workerUrl","origin","isESM","location","source","stringify","URL","createObjectURL","Blob","$f5e58b70d10edcb4$var$url","import","meta","url","$f5e58b70d10edcb4$exports","$b4e14b6b8da86996$var$optcarrot","$86Wyx","$0e112480d1414235$export$4997ffc0176396a6","Worker","nesView","nesAudio","fps","fpsIndicator","isAudioEnabledCheckbox","audioEnabled","checked","onclick","addEventListener","preventDefault","enableOptRaw","searchParams","headlessRaw","romRaw","$b4e14b6b8da86996$var$deriveOptions","_","$b4e14b6b8da86996$var$play","href"],"version":3,"file":"index.b971d4f8.js.map"}